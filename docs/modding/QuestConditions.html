<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Quest Condition/Responses </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Quest Condition/Responses ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="quest-conditionresponses">Quest Condition/Responses</h1>

<p>The quest condition/response section is probably the most involved section of the quest. Here is the logic or scripting of what happens during the quest.</p>
<p>This section can be thought of as tasks or steps which are triggered by various events in the game world. It probably helps if you've been exposed to some programming concepts before, but it isn't essential.</p>
<p>Each task of the quest has a symbol name associated with it, which can be used in other tasks to determine whether that step has been taken yet.</p>
<p>The general pattern of a task is:</p>
<pre><code>\_symbol\_  task:
    action1
    action2
      :
      :

     or

\_symbol\_  task:
	condition1
	condition2
	  :
    action1
    action2
      :
      :

      or

\_symbol\_  task:
	condition1
	condition2
	  :
      :

      or

until  \_symbol\_  performed:
	action1
	action2
	  :
      :
</code></pre>
<p>where an action is the desired quest activity and condition is the quest event to trigger the desired action.</p>
<p>Quest tasks are usually written in what's called their positive-definite form, and so are usually performed but once. However the <em>until performed</em> form creates a task to perform over and over again until another task is finished.</p>
<p>There are also task forms which condense the task and conditions together as a sort of shorthand.</p>
<p>For example, suppose part of a quest involves locating an NPC to receive a hint or clue. When the player locates that person, the quest must tell the <strong>X-engine</strong> what to do. We can create a task to handle this event in the game world.</p>
<pre><code>\_npcClicked\_ task:
    clicked \_npc\_
    say 1014
    log 1015 step 1
    reveal \_dungeon\_
    place \_item\_ at \_dungeon\_
</code></pre>
<p>which says roughly when the player clicks on _npc_ the NPC makes a speech from a Qrc message block, adds an entry to the player's log book, adds a dungeon to the province map, and hides a quest item in that dungeon.</p>
<p>Life isn't quite that simple though. What happens if the PC returns and clicks the NPC again? Does he get a free item? Oops. A better solution might be:</p>
<pre><code>-- This task remembers whether the PC has clicked \_npc\_
\_npcClicked\_ when \_npc\_ clicked

-- This  task remembers whether we've hidden the quest item or not.
\_itemHidden\_ when \_hideItem\_

-- This task checks whether the PC has clicked \_npc\_ and only
-- proceeds if we've not yet hidden the quest item.
\_hideItem\_ task:
when \_npcClicked\_ and not \_itemHidden\_
    say 1014
    log 1015 step 1
    reveal \_dungeon\_
    place \_item\_ at \_dungeon\_

-- This task intervenes if the PC clicks \_npc\_ again
-- after we've hidden the quest item in the dungeon.
\_alreadyHidden\_ task:
when \_npcClicked\_ and \_itemHidden\_
    say 1016
</code></pre>
<p>If the PC tries to 'cheat' by clicking the NPC again, the NPC chides the PC with message 1016.</p>
<hr>
<h2 id="quest-conditions">Quest conditions</h2>
<p>Apart from the quest start-up actions and clock time-outs, quest tasks are triggered by conditions or events within the game world which the quest wants to take special notice of, usually to supply some stimulus to the player character which would not otherwise arise.</p>
<p>This section catalogs the game world events which a quest can check for, to take appropriate action on as the circumstances require.</p>
<p>The game world events that a quest may capture are</p>
<ul>
<li>cast aSpell spell do aTask</li>
<li>clicked anItem</li>
<li>clicked anNPC</li>
<li>clicked anNPC and at least anAmount gold otherwise do aTask</li>
<li>daily from aTime1 to aTime2</li>
<li>dropped anItem at aPlace</li>
<li>faction aFaction available</li>
<li>from aTime1 to aTime2 daily</li>
<li>have anItem set aVariable</li>
<li>injured aFoe</li>
<li>killed aFoe</li>
<li>level nnnn completed</li>
<li>pc at aPlace do aTask</li>
<li>repute with anNPC exceeds nn do aTask</li>
<li>toting anItem and anNPC clicked</li>
<li>anItem used do aTask</li>
<li>anItem used saying nnnn do aTask</li>
<li>when aFoe killed</li>
<li>when aTaskHasBeenPerformed</li>
<li>when anItem clicked</li>
<li>when anItem used</li>
<li>when anItem used saying nnnn</li>
<li>when anNPC clicked</li>
<li>when anItem dropped at aPlace</li>
<li>when aSpell spell cast</li>
<li>when repute with aFaction is at least nnn</li>
<li>when pc at aPlace</li>
<li>when pc not at aPlace</li>
<li>when aSpell cast</li>
<li>when toting anItem and anNPC clicked</li>
</ul>
<p>Some of the conditions seem to describe the same thing (e.g., <em>killed aFoe</em> vs <em>when aFoe killed</em>) and they do refer to the same game world event, but have different contexts within the quest source file.</p>
<p>For the <strong>X-engine</strong>, conditions always have task names associated with them. But as a quest author you don't necessarily care about the task name a condition is associated with unless you need to refer to the completion of that task elsewhere in the quest.</p>
<p>So many of the conditions have two equivalent forms of expression, one which must follow a named task, and one which does not. The basic rule is that the forms beginning <em>when ...</em> create their own task names automatically while the other forms do not, and so must appear within a task named by the <em>task:</em> directive.</p>
<p>The detailed descriptions of the quest conditions follows.</p>
<hr>
<h3 id="locating-things-in-the-game-world">Locating things in the game world</h3>
<pre><code>clicked aThing
when aThing clicked
toting anItem and anNPC clicked
</code></pre>
<p>When the player character clicks on a quest related item or NPC this condition will schedule the actions associated with this task for execution by the <strong>X-engine</strong>. aThing must be a quest item created by an Item command, or a quest NPC created by a Person command.</p>
<pre><code>Message: 1017
   &lt;ce&gt; Your quest is complete.

when \_item1\_ clicked
    say 1017
    end quest  
</code></pre>
<p>In this quest fragment, when the PC clicks the mouse on _item1_ in the game world, message number 1017 is displayed and the quest is finished.</p>
<p>Alternatively, the same task could be written:</p>
<pre><code>foundItem task:
    clicked \_item1\_
    say 1017
    end quest
</code></pre>
<p>Sometimes you only want to take action if the PC approachs your NPC with a specific quest item</p>
<pre><code>Message: 1020
  &lt;ce&gt; Thank you for returning my widget.

returnItem task:
    toting \_item1\_ and \_questor\_ clicked
    say 1020
</code></pre>
<p>So the questor won't congradulate you unless you return with the quest item he's waiting for.</p>
<p>This last form, <em>toting and clicked</em> has an important side-effect when you include it in a scenario: <strong><em>The item is destroyed when both parts of the condition are true</em></strong>.</p>
<hr>
<h3 id="by-the-players-cash-on-hand">By the player's cash on hand</h3>
<pre><code>clicked anNPC and at least anAmount gold otherwise do aTask
</code></pre>
<p>When the PC clicks on a quest NPC in order to obtain a quest item from the NPC, the quest can assign a cost to the quest item and take different actions if the PC doesn't have the requisite cash available.</p>
<p>If the PC has at least the specified amount of gold on hand, that number of gold pieces will be taken from the PC and the remainder of the actions in this task will be performed.</p>
<p>If the PC doesn't have enough gold (and it must be available as pieces of gold; letters of credit don't seem to apply) none of the actions in the task are performed. Instead, the <strong>X-engine</strong> schedules the other task mentioned by the condition.</p>
<pre><code>\_buyTalisman\_ task:
    clicked \_healer\_ and at least 20 gold otherwise do \_pcTooPoor\_
    say 1013
    get item talisman
    log 1017 step 2

\_pcTooPoor\_ task:
    say 1015
    clear \_buyTalisman\_ \_pcTooPoor\_
</code></pre>
<hr>
<h3 id="by-the-clock">By the clock</h3>
<pre><code>daily from aTime1 to aTime2
from aTime1 to aTime2 daily
</code></pre>
<p>A quest may direct the <strong>X-engine</strong> to perform some task on a daily schedule. Often this involves sending nasties to plague the player, but any quest action is possible. This condition is used in the main story for example to make the ghost of King Lysandus haunt Daggerfall City for several hours after sunset. For example</p>
<pre><code>from 06:00 to 10:00 daily
    create \_foe\_ every 10 minutes 7 times with 100% success
</code></pre>
<p>or</p>
<pre><code>plague task:
    daily from 6:00 to 10:00
    create \_foe\_ every 10 minutes 7 times with 100% success
</code></pre>
<p>would create waves of nasties to plague the player character every morning from 6 to 10 for the duration of the quest.</p>
<p>Note also that each Clock command creates an implicit time-out condition. Create a task with the same name as the clock to activate when the clock runs out. Note that a Clock resource doesn't automatically start ticking, and must be started by using the <code>[_start timer_](#starttimer)</code> action.</p>
<pre><code>Message: 1019
  &lt;ce&gt; Well, you've run out of time now.

Clock \_tooSlow\_ 12.0

-- Quest startup:
    start timer \_tooSlow\_

\_tooSlow\_ task:
    say 1019
    end quest
</code></pre>
<p>In this quest fragment, if the PC is still plodding along after 12 days on this quest, chide him and terminate the quest.</p>
<hr>
<h3 id="checking-the-pcs-repute">Checking the PC's repute</h3>
<p>A quest can check the player's repute with a particular quest NPC and take different actions according to whether the NPC likes or dislikes the PC.</p>
<pre><code>repute with anNPC exceeds nn do aTask
</code></pre>
<p>is the condition to schedule a different task if the NPC favors the player character enough. NN is the PC's minimum repute with the NPC, usually between 0 and 100, although the PC's reputation can be negative.</p>
<pre><code>Message: 1019
  &lt;ce&gt; I suppose this will have to do.
  &lt;ce&gt; Couldn't you have brought a fresher sample?

Message: 1020
  &lt;ce&gt; I say, that was quite good work for a %ra.
  &lt;ce&gt; Here, take this extra reward for special service.

checkForBonus task:
    repute with \_npc\_ exceeds 41 do bonus

variable bonus

bonusReward task:
    when deadFoe and bonus
    say 1020
    give pc \_reward\_ \_extraReward\_
    end quest

regularReward task:
    when deadFoe and not bonus
    say 1019
    give pc \_reward\_
    end quest
</code></pre>
<p>which bestows one reward if the PC's reputation with the NPC is smaller than 42 and bestows two rewards if the reputation is larger than 41. You can write quests to shine the PC on if the NPC doesn't like the PC's previous affilliations.</p>
<hr>
<h3 id="using-items">Using items</h3>
<pre><code>have anItem set aVariable
have anItem do aTask
anItem used do aTask
anItem used saying nnnn do aTask
</code></pre>
<p>There are times when a quest author wants to take some special action when the player manipulates an object pertaining to the quest.</p>
<p>A quest can detect when the player has a particular item in the inventory by using the <em>have anItem</em> condition. The two forms are really equivalent, for in the <strong>X-engine</strong> a variable is just a task without any conditions or actions.</p>
<pre><code>Message: 1015
  &lt;ce&gt; You notice a sudden change in your surroundings.

ambush task:
    say 1015
    move \_foe\_ to pc

waiting task:
    have \_questItem\_ do ambush
</code></pre>
<p>would set up to ambush the PC after a quest item was added to the inventory.</p>
<pre><code>Message: 1015
  &lt;ce&gt; As you examine the parchment
  &lt;ce&gt; you notice your surroundings change.

ambush task:
    say 1015
    teleport pc to \_newDungeon\_

waiting task:
    \_questItem\_ used do ambush
</code></pre>
<p>would teleport the PC to a different dungeon when the quest item was used in the inventory screen (to read a quest letter perhaps)</p>
<hr>
<h3 id="attacking-foes">Attacking foes</h3>
<p>A quest can detect when the PC first injures an enemy in a fight or when the enemy is dead.</p>
<pre><code>injured aFoe
killed aFoe
killed nn aFoe
when aFoe injured
when aFoe killed
</code></pre>
<p>For example</p>
<pre><code>Message: 1099
  &lt;ce&gt; No, I won't let you kill me.  Begone!

When \_foe\_ injured
    say 1099
    teleport pc to \_newDungeon\_
</code></pre>
<p>which contrives to teleport the player elsewhere if the specified foe has been injured.</p>
<pre><code>Message: 1099
  &lt;ce&gt; Congradulations, you've killed the orc commander.

When \_foe\_ killed
    say 1099
    end quest
</code></pre>
<p>which pops up a message box when the PC slaughters the specified foe.</p>
<p>Recall that the Foe command will create mobs of kindred foes. You can specify how many of the mob must be slain for the condition</p>
<pre><code>Foe \_foe\_ is 17 vampire

enoughDead task:
    killed 5 \_foe\_
    get item \_reward\_
    teleport pc to \_newDungeon\_
</code></pre>
<p>would trigger the requested actions after killing 5 of the 17 vampires.</p>
<p>Note that the <em>killed</em> task will be permanently retired by the <strong>X-engine</strong> once the number of foes created by the associated <em>Foe</em> command have been slaughtered.</p>
<p>That sounds reasonable enough, but notice that it clashs with the use of the <em>create foe</em> command, which may create more foes to be killed than can be tested by the <em>killed</em> condition.</p>
<p>Even worse, you can't use several kill commands to check for different numbers of foes slaughtered. You can have only one <em>killed</em> action for each <em>Foe</em> declaration. If you provide more than one, the action response becomes <em>unpredictable</em>.</p>
<hr>
<h3 id="locating-the-pc-in-the-game-world">Locating the PC in the game world</h3>
<p>Sometimes you want to take some action when the PC arrives at a particular quest location.</p>
<pre><code>pc at aPlace do aTask
when pc at aPlace
when pc not at aPlace
pc at anNPC do aTask
when pc at anNPC
when pc not at anNPC
</code></pre>
<p>So for example,</p>
<pre><code>when pc at \_dungeon\_
    place \_questItem\_ at \_dungeon\_
    place \_foe\_ at \_dungeon\_
</code></pre>
<p>says that when the player character arrives at the dungeon the quest item and its defender are hidden inside the dungeon for the player to find.</p>
<pre><code>waiting task:
    pc at \_dungeon\_ do hideItem

hideItem task:
    place \_questItem\_ at \_dungeon\_
    place \_foe\_ at \_dungeon\_
</code></pre>
<p>accomplishes the same thing.</p>
<p>Writing a task when the player character isn't at a particular place is possible but rather tricky to avoid unwanted side-effects. You need to think through carefully what it means to have an action on-going the whole time the player isn't at a place. It may not be obvious but <strong>X-engine</strong> will schedule such a task every minute of the game when the player isn't at the specified place. The actions you can reasonably take are very limited. <em>Say</em> something? Not unless you want the user to dismiss pop-up messages til kingdom come.</p>
<p>Some of the Bethesda quests describe tasks when the PC isn't at a place, but not often. Decompile the _brisien quest if you're curious. Presumably the PC is not in the starter dungeon while using the character generator.</p>
<p>You can also detect when the PC is at the same place a quest NPC has been positioned. Usually you won't need this form since the place where the NPC is often has its own symbol. But you can use this form to check when the PC arrives at the birthplace of the NPC when your quest prefers to rely on such random selection.</p>
<hr>
<h3 id="noticing-player-discards">Noticing player discards</h3>
<p>You can detect when the player character drops quest items from the inventory into the game world.</p>
<pre><code>dropped anItem at aPlace
when anItem dropped at aPlace
</code></pre>
<p>schedules a task when the PC drops a quest item at a quest location defined by a Place command.</p>
<pre><code>Message: 1019
  &lt;ce&gt; You put the poisoned decanter back where you found it.

when \_item\_ dropped at \_house\_
    say 1019
    end quest
</code></pre>
<p>A quest can detect when the player abandons a quest item via the <em>remove</em> option on the inventory screen.</p>
<pre><code>Message: 1019
    &lt;ce&gt; Good.  You replace the poison-filled decanter.

replaceItem task:
    dropped \_poison\_ at \_house\_
    say 1019
</code></pre>
<hr>
<h3 id="noticing-spells-cast">Noticing spells cast</h3>
<p>A quest can notice when the player character casts specific spells within the game.</p>
<pre><code>cast aSpell spell do aTask
when aSpell spell cast
</code></pre>
<p>A quest can notice whether the player has cast one of the standard magic spells available in the game, and activate a task to take charge when that event occurs.</p>
<p>aSpell must be one of the stock spells from a spell vendor.</p>
<p>You cannot detect custom spells built by the spellmaker since there isn't any way for a prefabricated quest to know what combination of features a player may select through the spellmaker.</p>
<p>The names of the standard magic spells are shown in the table below. Not all spells can be purchased from the spell vendors. These spells are shown in <em><strong>italics</strong></em>.</p>
<p><strong><em>Arsenic</em></strong></p>
<p>Balyna's_Antidote</p>
<p>Balyna's_Balm</p>
<p>Banish_Daedra</p>
<p>Buoyancy</p>
<p>Calm_Humanoid</p>
<p>Chameleon</p>
<p>Charisma</p>
<p>Charm_Mortal</p>
<p>Cure_Disease</p>
<p>Cure_Poison</p>
<p><em><strong>Drothweed</strong></em></p>
<p>Energy_Leech</p>
<p>Far_Silence</p>
<p>Feet_of_Notorgo</p>
<p>Fenrik's_Door_Jam</p>
<p>Fire_Storm</p>
<p>Fireball</p>
<p>Force_Bolt</p>
<p>Fortitude</p>
<p>Free_Action</p>
<p>Frostbite</p>
<p>Gods'_Fire</p>
<p>Hand_of_Decay</p>
<p>Hand_of_Sleep</p>
<p>Heal</p>
<p>Holy_Touch</p>
<p>Holy_Word</p>
<p>Ice_Bolt</p>
<p>Ice_Storm</p>
<p><em><strong>Indulcet</strong></em></p>
<p>Invisibility</p>
<p>Iron_Will</p>
<p>Jack_of_Trades</p>
<p>Jumping</p>
<p>Levitate</p>
<p>Light</p>
<p>Lightning</p>
<p><em><strong>Lycanthropy</strong></em></p>
<p><em><strong>Magebane</strong></em></p>
<p>Magicka_Leech</p>
<p>Medusa's_Gaze</p>
<p><em><strong>Moonseed</strong></em></p>
<p>Nimbleness</p>
<p>Null_Magicka</p>
<p><em><strong>Nux_Vomica</strong></em></p>
<p>Open</p>
<p>Orc_Strength</p>
<p>Paralysis</p>
<p><em><strong>Pyrrhic_Acid</strong></em></p>
<p><em><strong>Quaesto_Vil</strong></em></p>
<p>Quiet_Undead</p>
<p>Recall</p>
<p>Resist_Cold</p>
<p>Resist_Fire</p>
<p>Resist_Poison</p>
<p>Resist_Shock</p>
<p>Shadow_Form</p>
<p>Shalidor's_Mirror</p>
<p>Shield</p>
<p>Shock</p>
<p>Silence</p>
<p>Sleep</p>
<p>Slowfalling</p>
<p><em><strong>Somnalius</strong></em></p>
<p>Soul_Trap</p>
<p>Spell_Absorption</p>
<p>Spell_Drain</p>
<p>Spell_Reflection</p>
<p>Spell_Resistance</p>
<p>Spell_Shield</p>
<p>Sphere_of_Negation</p>
<p>Spider_Touch</p>
<p>Stamina</p>
<p>Strength_Leech</p>
<p><em><strong>Sursum</strong></em></p>
<p>Tame</p>
<p><em><strong>Thyrwort</strong></em></p>
<p>Tongues</p>
<p>Toxic_Cloud</p>
<p>Troll's_Blood</p>
<p>Vampiric_Touch</p>
<p>Water_Breathing</p>
<p>Water_Walking</p>
<p>Wildfire</p>
<p>Wisdom</p>
<p>Wizard's_Fire</p>
<p>Wizard_Lock</p>
<p>Wizard_Rend</p>
<hr>
<h3 id="noticing-player-levels">Noticing player levels</h3>
<p>A quest can notice whether the player has achieved a certain level-up in the game world.</p>
<pre><code>level nnnn completed
</code></pre>
<p>This condition is associated with Snnnnnnn quests. It is true if the player has achieved level nnnn at the present time within the game world. If so, the actions associated with this task are performed.</p>
<hr>
<h3 id="noticing-several-things-together">Noticing several things together</h3>
<p>The preceding conditions essentially describe a single event each in the game world. But from time to time a quest needs to take one action when several conditions are satisfied. We've seen the preliminaries in the condition for toting an item and clicking on an NPC. More elaborate chains of circumstance can be crafted.</p>
<pre><code>when aTaskName and ...
when not aTaskName and ...
when aTaskName or ...
when not aTaskName or ...
</code></pre>
<p>Any named quest task can be checked to find out whether it has been performed or not. The <strong>X-engine</strong> allows up to four (4) tasks to be checked at the same time.</p>
<pre><code>Message: 1019
  &lt;ce&gt; You've slain the =foe\_.
  Here's your magic item reward.

deadFoe task:
    killed \_foe\_

variable haveItem

reward task:
    when deadFoe and not haveItem
    get item \_reward\_
    say 1019
    have \_reward\_ set haveItem
</code></pre>
<p>which bestows a reward on the PC after killing a quest foe. Since the quest may not yet be finished, remember the gift in the <em>haveItem</em> variable so the reward will only be given one time--which is probably what you want.</p>
<pre><code>Message: 1019
  &lt;ce&gt; You've slain enough enemies.
  Here's your magic item reward.

deadFoe1 task:
    killed \_foe1\_

deadFoe2 task:
    killed \_foe2\_

deadFoe3 task:
    killed \_foe3\_

variable haveItem

finishQuest task:
    when deadFoe1 or deadFoe2 or deadFoe3
    get item \_reward\_
    say 1019
    emd quest
</code></pre>
<p>which bestows a reward on the PC if any one of three different foes have been slaughtered.</p>
<p>Using a combination of <em>ands</em>, <em>ors</em>, and <em>nots</em> it is possible to construct a contingency from any of the preceding basic conditions, which can make for very interesting plot lines, especially when combined with the <code>[random task selection](#pickone)</code> command.</p>
<p>It is also possible to mention several different quest condtions together at the beginning of a task. When you do so, the actions of the task are scheduled if one or more of the conditions are satisfied.</p>
<pre><code>\_bigFinish\_ task:
     clicked \_item1\_
     clicked \_item2\_
     clicked \_item3\_
     killed \_foe\_
     end quest
</code></pre>
<p>which would stop the quest whenever the PC finds any one of three quest items or has killed the quest foe.</p>
<hr>
<h3 id="checking-faction-repute">Checking faction repute</h3>
<pre><code>when faction n1 repute is at least n2
</code></pre>
<p>This condition checks whether the PC's repute with one of the <strong>Daggerfall</strong> factions exceeds a particular value.</p>
<p>Main quests use this condition to test the PC's repute with the principal NPC of the story before scheduling certain of the subplots for execution.</p>
<p>Some main quests do not declare a Person command for permanent NPCs that they wish to monitor. Instead the faction number of that permanent NPC is used to access the PC's repute.</p>
<p>Although the main story limits the use of this condition to permanent NPCs, checking the NPC's repute with any of the <strong>Daggerfall</strong> factions is likely to work.</p>
<hr>
<h3 id="checking-faction-availability">Checking faction availability</h3>
<pre><code>when aFaction is available
</code></pre>
<p>This condition checks whether the specified faction is available for assignment as a questor in an upcoming quest that the present quest would like to schedule. nnn is either a faction number, or the proper name of a faction. See the <code>[_Person_](#persons)</code> command for the complete list of factions.</p>
<p>This condition is triggered by the player clicking the mouse on an NPC sprite associated with the specific faction in the game world.</p>
<p>The main quest monitors the availability of NPCs connected with the main story before attempting to schedule a new subplot. The player triggers this check by clicking on the NPC sprite that corresponds to the specified faction.</p>
<p>Some permanent NPCs play a role in several different subplots. To avoid inadvertently scheduling a new subplot which uses a permanent NPC in a starring role while the same NPC is already starring in an active quest, the monitor quest checks whether the desired NPC is free at the moment, to schedule their entrance in the upcoming subplot.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TheLacus/daggerfall-unity-docs/blob/master/modding/QuestConditions.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
