<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Quest Organization </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Quest Organization ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="quest-organization">Quest Organization</h1>

<p>The source file created by the quest decompiler is divided into three parts:</p>
<ul>
<li>Quest preamble</li>
<li>Qrc text blocks</li>
<li>Quest resources and operation (Qbn)</li>
</ul>
<p>which are discussed subsequently.</p>
<h2 id="quest-preamble">Quest Preamble</h2>
<p>The quest preamble lays out the general requirements of the quest: who offers it, who can receive it, how it is started, etc. The purpose of this preamble is to collect the information required to fabricate a standard quest file name pattern. There are two ways to do so, concisely or verbosely.</p>
<p>Quest: pattern</p>
<p>where pattern is the desired quest file name pattern. For example</p>
<pre><code>Quest:  b0c00y13
</code></pre>
<p>Alternately, the pattern can be inferred by the compiler from the following verbose descriptions. Case is insignificant.</p>
<hr>
<p>StartsBy: [Letter | NPC]</p>
<p>Indicates whether the quest starts by the player character receiving a letter or by contacting an NPC (non-player character) in the game.</p>
<hr>
<p>Questee: [Initiate | Member | Anyone]</p>
<p>Indicates what general relationship the PC must have with respect to the NPC / group that offers the quest.</p>
<p>Initiate</p>
<p>Initial invitation to join</p>
<p>Member</p>
<p>PC must be a member of this group</p>
<p>Anyone</p>
<p>Anyone may be offered this quest</p>
<hr>
<p>Questor: quest grantor or single letter key</p>
<p>The <em>questor</em> is the group, guild, or daedra prince which offers the quest. It can be specified by single letter key (as used by the quest file name pattern) or by the proper name of the group, taken from the following list:</p>
<p>Questor</p>
<p>Key</p>
<p>Ids[1]</p>
<p>Questor</p>
<p>Key</p>
<p>Ids</p>
<p>Questor</p>
<p>Key</p>
<p>Ids</p>
<p>Akatosh</p>
<p>D</p>
<p>0</p>
<p>Lady Azura</p>
<p>T</p>
<p>0</p>
<p>Peasant</p>
<p>A</p>
<p>0-18</p>
<p>Arkay</p>
<p>E</p>
<p>0</p>
<p>Mage</p>
<p>N</p>
<p>1-18</p>
<p>Peryite</p>
<p>5</p>
<p>0</p>
<p>Boethiah</p>
<p>U</p>
<p>0</p>
<p>Main</p>
<p>S</p>
<p>[2]</p>
<p>Royalty</p>
<p>R</p>
<p>0-28</p>
<p>Brotherhood</p>
<p>L</p>
<p>0-11</p>
<p>Malacath</p>
<p>8</p>
<p>0</p>
<p>Sanguine</p>
<p>7</p>
<p>0</p>
<p>Clavicus Vile</p>
<p>V</p>
<p>0</p>
<p>Mara</p>
<p>H</p>
<p>0</p>
<p>Sheogorath</p>
<p>6</p>
<p>0</p>
<p>Dibella</p>
<p>F</p>
<p>0</p>
<p>Mehrunes Dagon</p>
<p>Y</p>
<p>0</p>
<p>Stendarr</p>
<p>I</p>
<p>0</p>
<p>Fighter</p>
<p>M</p>
<p>0-19</p>
<p>Mephala</p>
<p>Z</p>
<p>0</p>
<p>Temple</p>
<p>C</p>
<p>0-15</p>
<p>Hermaeus Mora</p>
<p>W</p>
<p>0</p>
<p>Merchant</p>
<p>K</p>
<p>0-10</p>
<p>Thief</p>
<p>O</p>
<p>0-12</p>
<p>Hircine</p>
<p>X</p>
<p>0</p>
<p>Meridia</p>
<p>1</p>
<p>0</p>
<p>Vaernima</p>
<p>9</p>
<p>0</p>
<p>Julianos</p>
<p>0</p>
<p>0</p>
<p>Molag Bal</p>
<p>2</p>
<p>0</p>
<p>Vampire</p>
<p>P</p>
<p>0-10</p>
<p>Knight</p>
<p>B</p>
<p>0-17</p>
<p>Namira</p>
<p>3</p>
<p>0</p>
<p>Witch</p>
<p>Q</p>
<p>0-8</p>
<p>Kynaran</p>
<p>G</p>
<p>0</p>
<p>Nocturnal</p>
<p>4</p>
<p>0</p>
<p>Zenithar</p>
<p>J</p>
<p>0</p>
<p>[1]See <em>QuestId:</em> below. CompUSA quests are included.<br>
[2]Main story numbers in use are 1-22, 100-107, 500-503, 977, 988, and 999.</p>
<p>Again, case is not significant. Space, for those daedra princes with two names, <em>is</em>. Main refers to the main story quests.</p>
<p>     Questor: Arkay</p>
<p>indicates a quest offered by the temple of Arkay, for example.</p>
<hr>
<p>Repute: mm</p>
<p>The repute is the minimum repute the PC must have with respect to the group / prince offering the quest. It can also indicate a range of reputes for which the quest is offered.</p>
<p>If mm is strictly numeric, then it indicates the minimum repute the PC must have, with 0 being the smallest repute and 99 the largest.</p>
<p>Quests can be restricted to a particular decade of the PC's repute with the questor by writing the units digit as the letter <em>x</em>.</p>
<pre><code>   Repute: 3x
</code></pre>
<p>limits the quest to PCs whose repute is between 30 and 39 with the questor.</p>
<hr>
<p>QuestId: nn</p>
<p><strong>X-engine</strong> expects every quest associated with one of the questor groups to have a unique two-digit serial number assigned to it.</p>
<pre><code>    QuestId: 17
</code></pre>
<p>assigns <em>17</em> as the quest id in the file name pattern for the quest.</p>
<p>If the quest preamble describes a quest that already exists, the compiler will replace the original contents of that quest with the new contents from this source file.</p>
<p>If that quest does not already exist, the compiler will create a new <strong>Daggerfall</strong> quest for it.</p>
<p>Please see the table of guilds/questors for the quest ids already in use by the game.</p>
<hr>
<p>Messages: aNumber</p>
<p>The quest compiler needs to know approximately how many message blocks will be recorded in the Qrc file before it begins processing. By default it reserves space for 50 message blocks. If the quest scenario supplies more than 50 messages, the compiler needs to be told the number of messages to expect with this directive.</p>
<p>The decompiler now automatically includes this directive when it decompiles a quest, as a convenience for recompiling quests. However, adding additional messages to existing quests may bump into the message count limit. The limit need not be exact, just more than enough.</p>
<hr>
<p>AllowDupes:</p>
<p>Some existing quests from Bethesda have Qrc files that contain duplicate message block numbers. This is arguably wrong when you're creating a fresh quest, and the compiler normally smacks you if you try to do such a thing. But to allow the existing quests to recompile without trying to figure out which text block is the valid one--good luck--supplying this directive in the quest preamble will instruct the compiler not to whine if it finds message block numbers are being reused.</p>
<hr>
<p>QuestDir: aDirectoryPath</p>
<p>You can tell the compiler where you want it to produce the qrc/qbn files by supplying the directory path name where you'd like them to go. By default, the compiler drops them in the same directory as the scenario source file.</p>
<pre><code>    QuestDir:  d:\\games\\dag\\arena2
</code></pre>
<p>directs the compiler to the arena2 directory of my <strong>Daggerfall</strong> installation.</p>
<hr>
<h2 id="qrc-text-blocks">QRC Text Blocks</h2>
<p>Every message displayed by a quest is assigned a serial number starting from 1000 and increasing. The first dozen numbers have stock behavior associated with them, and may be called for display automatically by the game engine during the quest, without an explicit trigger in the compiled quest script.</p>
<p>The text block section of the source file is announced by the directive:</p>
<pre><code>Qrc:
</code></pre>
<p>The compiler will expect to find text message blocks thereafter in the source file, until it is told otherwise. Again, the case of the directive doesn't matter.</p>
<p>In the source file, the text composing a quest message is introduced by the Message: directive followed by the message number to assign to the text block.</p>
<p>The compiler accepts synonyms for the stock quest messages:</p>
<p>QuestorOffer:<br>
Message: 1000</p>
<p>What the questor says when the PC makes contact for the quest. Although not enforced by the compiler, for quests started in person, this is likely a required message.</p>
<hr>
<p>RefuseQuest:<br>
Message: 1001</p>
<p>What the questor says when the PC refuses the quest offer. Again, while the compiler is silent about its omission, for quests started in person, this is likely a required message block.</p>
<hr>
<p>AcceptQuest:<br>
Message: 1002</p>
<p>What the questor says when the PC accepts the quest. Again, this block is likely expected for quests started in person.</p>
<hr>
<p>QuestFailed:<br>
Message: 1003</p>
<p>What the questor says until the PC completes the quest. Again, this block is likely expected for quests started in person.</p>
<hr>
<p>QuestComplete:<br>
Message: 1004</p>
<p>What the questor says when the PC completes the quest and returns. Again, this block is likely expected for quests started in person.</p>
<p>Note that certain quest actions will post this message automatically. See <code>[_give pc_](#givepc) / [_give pc nothing_](#givepc3)</code>.</p>
<hr>
<p>RumorsDuringQuest:<br>
Message: 1005</p>
<p>Gives information that may come up during <em>Any News?</em> dialogs the PC has during the quest.</p>
<hr>
<p>RumorsPostFailure:<br>
Message: 1006</p>
<p>Gives information that may come up during <em>Any News?</em> dialogs the PC has after failing the quest. The <strong>X-engine</strong> eventually retires these after a suitable time lag.</p>
<hr>
<p>RumorsPostSuccess:<br>
Message: 1007</p>
<p>Gives information that may come up during <em>Any News?</em> dialogs the PC has after completing the quest. The <strong>X-engine</strong> eventually retires these after a suitable time lag.</p>
<hr>
<p>QuestorPostSuccess:<br>
Message: 1008</p>
<p>What the questor says to the PC in dialog after a successful quest. That is, when the PC chats with the questor through the dialog screen.</p>
<hr>
<p>QuestorPostFailure:<br>
Message: 1009</p>
<p>What the questor says to the PC in dialog after a failed quest. That is, when the PC chats through the dialog screen.</p>
<hr>
<p>QuestLogEntry:<br>
Message: 1010</p>
<p>The message inserted into the PC's log when the quest is accepted. Probably not used automatically.</p>
<hr>
<p>QuestTimeLapse:<br>
Message: 1045</p>
<p>Displayed when the PC fails to meet a quest with a dead-line. Probably not used automatically.</p>
<hr>
<p>The quest author can create as many additional message blocks as the quest requires, although the compiler arbitrarily complains if you choose message numbers larger than 2100. 1000 message blocks isn't a quest, it's a whole game.</p>
<p>Since remembering what text is associated with a Qrc message number is tedious, the compiler will accept an arbitrary label in place of a message number. The compiler will automatically assign the next available message number to each message label you provide. And you can refer to the Qrc message by that label in the Qbn section of the quest file.</p>
<pre><code>Message: NpcPeeved
What? I can't believe you took so long
for such a simple request!
</code></pre>
<p>You can mix labels with section numbering in different message blocks.</p>
<p>Following the Message: directive are the lines composing that message block. By default, left justification is used.</p>
<p>Text can be centered by using the <ce> tag at the beginning of the line to be centered.<p>
<p>An empty or blank line can be inserted by using the <br> tag for the content of a line.</p>
<p>A message block may be divided into subsections. When <strong>X-engine</strong> displays a subsectioned message block, it displays only one of the available subsections of that block at a time. The selected subsection is chosen at random from the subsections available for the block. The next time <strong>X-engine</strong> is asked to display that message block it repeats this process, and so may select a different subsection for display.</p>
<p>Subsectioning gives variety to the messages that appear when the PC performs the same quest more than once. Indeed, with clever use, the quests can appear quite different when coupled with the randomizing feature in the Qbn section. While there may be an upper bound on the number of subsections the <strong>X-engine</strong> can handle, there are existing quests with upwards of a dozen subsections each in several different message blocks.</p>
<p>Any message block can be subsectioned by using the &lt;---&gt; tag on a line to start a new subsection:</p>
<pre><code>RumorsDuringQuest:
&lt;ce&gt;I heard that %ra is a complete loser.
            &lt;---&gt;
That %ra is after some loser's hide.
            &lt;---&gt;
&lt;ce&gt;Isn't %ra chasing after \_questgiver\_ for something?
</code></pre>
<p>The position of the tag on the line is irrelevant.</p>
<pre><code>RumorsDuringQuest:
       &lt;ce&gt;I heard that %ra is a complete loser.
&lt;---&gt;
That %ra is after some loser's hide.
&lt;---&gt;
   &lt;ce&gt;Isn't %ra chasing after \_questgiver\_ for something?
</code></pre>
<p>works just as well. The decompiler takes advantage of this to center the decompiled text as required.</p>
<p>Be careful of leaving blank lines between different quest message blocks unless you intend the message to display empty lines in the block. Generally, you want only one blank line between the end of one block and the next message block:</p>
<pre><code>RumorsDuringQuest:
Very strange sounds come out of the \_house\_.
        &lt;---&gt;
\_qgiver\_'s house has really gone to Oblivion.

RumorsPostfailure:
Poor \_qgiver\_ has to hire an exterminator.
        &lt;---&gt;
It's going to cost \_qgiver\_ to clean that house.
</code></pre>
<hr>
<h3 id="qrc-symbols">Qrc Symbols</h3>
<p><strong>X-engine</strong> likes to name replaceable parts of text as _symbol_, where in fact symbol can be any meaningful mnemonic. (See <code>[Quest Resources](#qbn)</code> for how symbols are created)</p>
<p>There are some fairly intricate rules for using symbols in a Qrc message block.</p>
<p>_foo_ is replaced with the name of foo: a ring, an NPC's name, or kind of enemy. It is generally an error to use this form for a Place or Clock quest resource. The quest compiler won't stop you from doing so, but the results within the game world aren't likely to be what you expect.</p>
<p>=foo_ is replaced by the clock time (expressed as the number of days that the clock will be active) when _foo_ is a Clock quest resource. Or by the character class when _foo_ is an NPC quest resource, or by the foe's name for enemy resource.</p>
<p>==foo_ is replaced by the faction association for an NPC quest resource. So for a Person symbol:</p>
<p>_foo_ of ==foo_</p>
<p>would result in something like</p>
<p>Zaphod Beeblebrox of the Blades</p>
<p>while</p>
<p>_foo_ the =foo_</p>
<p>would result in something like</p>
<p>Zaphod Beeblebrox the Acrobat</p>
<p>If _foo_ is a Person resource then ___foo_ (<em>three</em> leading underscores) gives the town name where _foo_ can be found. While __foo_ (<em>two</em> leading underscores) gives the name of the house/shop in that town where _foo_ can be found. If you move _foo_ to different places in the game world, it isn't obvious that these symbols will track those moves. I tend to regard them as 'birthplace' markers, rather than present residence markers.</p>
<p>Place symbols follow slightly different semantics.</p>
<p>_foo_ is the form of a shop name.</p>
<p>__foo_ is the town where the shop can be found.</p>
<p>___foo_ is the form of a dungeon name.</p>
<p>____foo_ is the name of the province where the place can be found.</p>
<p>This pattern holds regardless of whether _foo_ was created as a shop or as a dungeon. This is why some existing quests give out mysterious hints about non-existent shops. The quest author left out underscores in the Qrc text, and got the shop name format instead of the dungeon name format.</p>
<p>Note that quest locations which are not randomly generated, the <em>permanent</em> sites, do not follow these rules at all. The symbol used to represent a permanent site is always replaced by random garbage in a Qrc block. So the information for a permanent site must needs be written out in full inside a Qrc block.</p>
<p>The following table summarizes the usage. <strong>NO</strong> means you probably don't want to use that substitution. At any rate, there aren't any such examples in the existing quests.</p>
<p>Symbol</p>
<p>Item</p>
<p>Person</p>
<p>Place[1]</p>
<p>Foe</p>
<p>Clock</p>
<p>_foo_</p>
<p><em>ring</em></p>
<p><em>Zaphod Beeblebrox</em></p>
<p><em>Lord Marcus' Arms</em></p>
<p><em>warrior</em></p>
<p><strong>NO</strong></p>
<p>__foo_</p>
<p><strong>NO</strong></p>
<p><em>Adams residence</em></p>
<p><em>Daggerfall City</em>[2]</p>
<p><strong>NO</strong></p>
<p><strong>NO</strong></p>
<p>___foo_</p>
<p><strong>NO</strong></p>
<p><em>Gothway Gardens</em></p>
<p><em>Ruins of Bethsoft</em></p>
<p><strong>NO</strong></p>
<p><strong>NO</strong></p>
<p>____foo_</p>
<p><strong>NO</strong></p>
<p><em>NO</em></p>
<p><em>Daggerfall</em></p>
<p><strong>NO</strong></p>
<p><strong>NO</strong></p>
<p>=foo_</p>
<p><strong>NO</strong></p>
<p><em>Acrobat</em></p>
<p><strong>NO</strong></p>
<p><em>Arthur Dent</em></p>
<p><em>4 days</em></p>
<p>==foo_</p>
<p><strong>NO</strong></p>
<p><em>Blades</em></p>
<p><strong>NO</strong></p>
<p><em>Fighter</em></p>
<p><strong>NO</strong></p>
<p>[1]Not available for <em>permanent</em> sites. [2]This form is invalid for remote dungeons.</p>
<p>There is a whole family of %symbols to scrape out information about the PC, NPC gender, and the like, which are tabulated below. [1]</p>
<p>The pronomial forms (<em>%g</em>, <em>%g1</em>, etc) refer <em>back</em> to the last NPC or foe symbol appearing in the same Qrc text block to determine the proper declension. It is usually an error in content to use one of them prior to the first appearance of the proper noun you want them bound to. When a computer refers back that way, it's anybody's guess which person will actually be used for the construction. That happens from time to time in the existing quests, and so you may see quirky constructs like &quot;...her research lab where Andystair Bonedoggle...&quot; when you're pretty sure <em>Andystair</em> takes the masculine, not feminine gender.</p>
<p>All of these symbols appear at one time or another, either in arena2\text.rsc, fall.exe, arena2\*.qrc, or arena2\bio*.txt. It is unclear whether their use is restricted to contexts appropriate to each of those file sets, or whether you're free to mix bio*.txt symbols within Qrc blocks. If you use one of these symbols in an improper context, Daggerfall generally posts an error message naming the offensive symbol and dies.</p>
<p>Symbols in <em>italics</em> appear in the existing qrc files from Bethesda.</p>
<p>%1am</p>
<p>1st + Magnitude</p>
<p>%1bm</p>
<p>1st base Magnitude</p>
<p>%1com</p>
<p>Greeting (?)</p>
<p>%1hn</p>
<p>?</p>
<p>%2am</p>
<p>2nd + Magnitude</p>
<p>%2bm</p>
<p>2nd Base Magnitude</p>
<p>%2com</p>
<p>?</p>
<p>%2hn</p>
<p>?</p>
<p>%3hn</p>
<p>?</p>
<p>%a</p>
<p>Cost of somthing.</p>
<p>%ach</p>
<p>+ Chance per</p>
<p>%adr</p>
<p>?</p>
<p>%adr</p>
<p>+ Duration per</p>
<p>%agi</p>
<p>Amount of Agility</p>
<p>%arm</p>
<p>Armour</p>
<p>%ark</p>
<p>?</p>
<p>%ba</p>
<p>Book Author</p>
<p>%bch</p>
<p>Base chance</p>
<p>%bdr</p>
<p>Base Duration</p>
<p>%bn</p>
<p>?</p>
<p>%bt</p>
<p>Book title</p>
<p>%cbl</p>
<p>Cash balance in current region</p>
<p>%clc</p>
<p>Per level (Chance)</p>
<p>%cld</p>
<p>Per level (Duration)</p>
<p>%clm</p>
<p>Per level (Magnitude)</p>
<p><em><strong>%cn</strong></em></p>
<p>Current City</p>
<p>%cn2</p>
<p>?</p>
<p>%cpn</p>
<p>Current shop name</p>
<p>%cri</p>
<p>Accused crime</p>
<p>%crn</p>
<p>Current Region</p>
<p>%dae</p>
<p>A daedra</p>
<p>%dam</p>
<p>Damage modifyer</p>
<p><em><strong>%dat</strong></em></p>
<p>Date</p>
<p><em><strong>%di</strong></em></p>
<p>Direction</p>
<p>%dip</p>
<p>?</p>
<p>%dng</p>
<p>Dungeon</p>
<p>%dts</p>
<p>Daedra</p>
<p>%dwr</p>
<p>?</p>
<p>%ef</p>
<p>Local shop name</p>
<p>%enc</p>
<p>Encumberence</p>
<p>%end</p>
<p>Amount of Endurance</p>
<p>%fcn</p>
<p>Another city</p>
<p>%fe</p>
<p>?</p>
<p>%fea</p>
<p>?</p>
<p>%fl1</p>
<p>Lord of %fx1</p>
<p>%fl2</p>
<p>Lord of %fx2</p>
<p>%fn</p>
<p>Random first(?) name (Female?)</p>
<p>%fn2</p>
<p>Same as %mn2 (?)</p>
<p>%fnpc</p>
<p>?</p>
<p>%fon</p>
<p>?</p>
<p>%fpa</p>
<p>?</p>
<p>%fpc</p>
<p>?</p>
<p>%fx1</p>
<p>A faction in news</p>
<p>%fx2</p>
<p>Another faction in news</p>
<p><em><strong>%g</strong></em></p>
<p>He/She etc...</p>
<p><em><strong>%g1</strong></em></p>
<p>He/She ???</p>
<p><em><strong>%g2</strong></em></p>
<p>Him/Her etc...</p>
<p><em><strong>%g2self</strong></em></p>
<p>Himself/Herself etc...</p>
<p><em><strong>%g3</strong></em></p>
<p>His/Hers/Theirs etc...</p>
<p>%gii</p>
<p>Amount of gold in hand</p>
<p><em><strong>%god</strong></em></p>
<p>Some god (listed in TEXT.RSC)</p>
<p>%gtp</p>
<p>Amount of fine</p>
<p>%hea</p>
<p>HP Modifier</p>
<p>%hmd</p>
<p>Healing rate modifer</p>
<p>%hnr</p>
<p>Honorific</p>
<p>%hnt</p>
<p>Direction of location.</p>
<p>%hnt2</p>
<p>?</p>
<p>%hol</p>
<p>Holiday</p>
<p>%hpn</p>
<p>?</p>
<p>%hpw</p>
<p>?</p>
<p>%hrg</p>
<p>?</p>
<p>%hs</p>
<p>Holding Soul type</p>
<p>%htwn</p>
<p>?</p>
<p>%imp</p>
<p>?</p>
<p>%int</p>
<p>Amount of Intelligence</p>
<p>%it</p>
<p>Item</p>
<p><em><strong>%jok</strong></em></p>
<p>A joke</p>
<p>%key</p>
<p>A location (?)</p>
<p>%key2</p>
<p>Another location</p>
<p>%kg</p>
<p>Weight of items</p>
<p><em><strong>%kno</strong></em></p>
<p>A knightly guild name</p>
<p>%lev</p>
<p>Rank in guild that you are in.</p>
<p>%ln</p>
<p>Random lastname</p>
<p>%loc</p>
<p>Location marked on map</p>
<p>%lt1</p>
<p>Title of %fl1</p>
<p>%ltn</p>
<p>In the eyes of the law you are.......</p>
<p>%luc</p>
<p>Luck</p>
<p>%map</p>
<p>?</p>
<p>%mad</p>
<p>Resistance</p>
<p>%mat</p>
<p>Material</p>
<p>%mit</p>
<p>Item</p>
<p>%mn</p>
<p>Random First(?) name (Male?)</p>
<p>%mn2</p>
<p>Same as %mn (?)</p>
<p>%mod</p>
<p>Modification</p>
<p>%mpw</p>
<p>Magic powers</p>
<p><em><strong>%n</strong></em></p>
<p>A random female first name</p>
<p><em><strong>%nam</strong></em></p>
<p>A random full name</p>
<p><em><strong>%nrn</strong></em></p>
<p>Noble of the current region</p>
<p>%nt</p>
<p>?</p>
<p>%ol1</p>
<p>Old lord of %fx1</p>
<p>%olf</p>
<p>What happened to %ol1</p>
<p>%on</p>
<p>?</p>
<p><em><strong>%oth</strong></em></p>
<p>An oath (listed in TEXT.RSC)</p>
<p>%pc</p>
<p>?</p>
<p><em><strong>%pcf</strong></em></p>
<p>Character's first name</p>
<p><em><strong>%pcn</strong></em></p>
<p>Character's full name</p>
<p><em><strong>%pct</strong></em></p>
<p>Character's class</p>
<p>%pdg</p>
<p>Days in jail</p>
<p>%pen</p>
<p>Prison sentence</p>
<p>%per</p>
<p>Amount of Personality</p>
<p>%plq</p>
<p>Place of something in log.</p>
<p>%pnq</p>
<p>Person of something in log</p>
<p>%pp1</p>
<p>?</p>
<p>%pp2</p>
<p>?</p>
<p>%pqn</p>
<p>Potential Quest Giver</p>
<p>%pqp</p>
<p>Potential Quest Giver's Location</p>
<p>%ptm</p>
<p>An enemy of the current region (?)</p>
<p>%q1 to %q12</p>
<p>Effects of questions answered in bio.</p>
<p><em><strong>%qdt</strong></em></p>
<p>Quest date of log entry</p>
<p><em>%qdat</em></p>
<p>Quest date of log entry [2]</p>
<p>%qot</p>
<p>The log comment</p>
<p>%qua</p>
<p>Condition</p>
<p>%r1</p>
<p>Commoners rep</p>
<p>%r2</p>
<p>Merchants rep</p>
<p>%r3</p>
<p>Scholers rep</p>
<p>%r4</p>
<p>Nobilitys rep</p>
<p>%r5</p>
<p>Underworld rep</p>
<p><em><strong>%ra</strong></em></p>
<p>Player's race</p>
<p><em><strong>%reg</strong></em></p>
<p>Region</p>
<p><em><strong>%rn</strong></em></p>
<p>Regent's Name</p>
<p><em><strong>%rt</strong></em></p>
<p>Regent's Title</p>
<p>%spc</p>
<p>Current Spell Points</p>
<p>%ski</p>
<p>Skill</p>
<p>%spd</p>
<p>Speed</p>
<p>%spt</p>
<p>?</p>
<p>%str</p>
<p>Amount of strength</p>
<p>%sub</p>
<p>?</p>
<p><strong><em>%t</em></strong></p>
<p>Regent's Title</p>
<p>%tcn</p>
<p>?</p>
<p>%thd</p>
<p>Combat odds</p>
<p>%tim</p>
<p>Time</p>
<p><em><strong>%vam</strong></em></p>
<p>PC's vampire clan</p>
<p>%vcn</p>
<p>Vampire's Clan</p>
<p>%vn</p>
<p>?</p>
<p>%wdm</p>
<p>Weapon damage</p>
<p>%wep</p>
<p>Weapon</p>
<p>%wil</p>
<p>?</p>
<p>%wpn</p>
<p>Poison (?)</p>
<p>%wth</p>
<p>Worth</p>
<p>[1] Reproduced from Appendix A, <em>Daggerfall Quest File (QRC/QBN) Hacking Results - v1.00</em>, by Dave Humphrey <code>[\[email protected\]](/cdn-cgi/l/email-protection)</code> I've added 2 or 3 additional symbols from the qrc files.<br>
[2] Appears in <em>d0b00y00</em>, the Akatosh Chantry quest, but looks like a simple misspelling of <em>%qdt</em>.</p>
<hr>
<h2 id="quest-resources-and-operations">Quest Resources and Operations</h2>
<p>Once the text blocks for the quest have been laid out, the contents of the Qbn file are described by using the Qbn directive</p>
<pre><code>Qbn:
</code></pre>
<p>to instruct the compiler to finish the Qrc section and begin the Qbn section of the source code.</p>
<p>The Qbn section is by far the more complicated part, and is itself further divided into subsections:</p>
<ul>
<li>Items required in the quest</li>
<li>Persons encountered in the quest</li>
<li>Places encountered in the quest</li>
<li>Clocks or timers used in the quest</li>
<li>Foes encountered in the quest</li>
<li>Condition/responses that operate during the quest</li>
</ul>
<p>The exact order you pick is somewhat irrelevant. The only requirement by the compiler is that the condition/responses appear last, since they generally refer to resources defined by the other sections.</p>
<hr>
<h3 id="managing-the-dialog-screen">Managing the Dialog Screen</h3>
<p>The scenario can control whether to include each quest item, person, or place resource in the pick list under the <em>Tell me about...</em> dialog tab.</p>
<p>Each item, person, or place resource can be embellished with the tag</p>
<pre><code>anyInfo aQrcNumber
</code></pre>
<p>where aQrcNumber is a Qrc message block to display in the dialog screen when the PC chats about that particular resource.</p>
<p>When the scenario assigns an <em>anyInfo</em> Qrc message to a quest resource, the name of that resource automatically appears as a new entry in the pick list under the <em>Tell me about...</em> dialog tab.</p>
<p>Such entries are available throughout the duration of the quest for use in conversation with anyone the PC happens upon in the game world.</p>
<p>Note, however, that the PC's repute with the NPC being spoken to affects the outcome of chatting about such entries. So not every NPC spoken to will offer the information provided by the scenario when quizzed by the PC. But, when combined with the subsectioning message block technique, different pieces of information may be supplied at each chat session.</p>
<p>But sometimes a scenario wants to make such information available only after the PC has met certain milestones within the quest. In such cases, the scenario can control when the <em>anyInfo</em> messages become available through the <code>[_dialog link_](#rumor5) and [_add dialog_](#rumor1)</code> family of quest actions.</p>
<p>Note that once an entry has been added to the <em>Tell me about...</em> pick list, it is stuck there for the remaining life of the quest. There does not appear to be any quest action to delete entries from the list.</p>
<p>A person or place quest resource may be further embellished with the tag</p>
<pre><code>rumors aQrcNumber
</code></pre>
<p>where aQrcNumber is a Qrc message block to display in the dialog screen when the PC selects the <em>Any News?</em> dialog option.</p>
<p>Oftentimes, adding a <em>rumors</em> tag will insert the quest resource into the dialog picklist as well, but this insertion can be suppressed with <code>[_dialog link_](#rumor5)</code> family of commands.</p>
<hr>
<h3 id="quest-items">Quest Items</h3>
<p>Every item associated with the quest must be described for the <strong>X-engine</strong> using a form of the Item command. Items include not only things, like rings, letters, drugs, or artifacts, but also quest rewards like gold payment.</p>
<p>In addition each item can have message text from the Qrc file associated with it, which is displayed when the item is discussed with an NPC or when the PC 'uses' the item in the inventory screen.</p>
<p>Quest items with usage text will also appear in the About picklist when conversing with NPCs. The Qrc text will be 'spoken' by the NPC if asked about the item.</p>
<p>Whether the item automatically appears as a topic under the <em>Tell me about...</em> dialog tab is somewhat variable. Non-letter items tend always to appear, while letter items tend to depend upon their method of delivery to the PC.</p>
<p>Regardless, the scenario can regulate the contents of the <em>Tell me about...</em> picklist with the <code>[_dialog link_](#rumor5) and [_add dialog_](#rumor1)</code> actions.</p>
<p>To prevent a quest item with usage text from appearing in the dialog picklist, simply include a <em>dialog link item</em> for it in the quest start-up. If there is no corresponding <em>add dialog item</em> action for it, then it will never appear.</p>
<p>As a rule, when the PC acquires a quest item in the inventory it shows up with a green background. Furthermore, such items will be automatically taken from the player when the quest terminates. Special steps have to be taken in the condition/response section to bestow an item (like an artifact) on the player permanently.</p>
<p>So in general, don't expect a quest item to hang around after the player completes the quest unless you provide for that specially in the condition/response section.</p>
<p>Also note that quest items are unknown to <strong>X-Engine</strong> until the scenario puts them somewhere in the game world. The practical consequence of this is that displaying a Qrc message block referring to a quest item <em>before</em> that item has been placed in the world, or <em>after</em> it has been destroyed, will most likely result in the infamous BLANK text when the Qrc message is shown to the player.</p>
<p>A quest isn't required to have a item section, but most quests that do anything interesting have them.</p>
<p>There are three general forms for the Item command:</p>
<ul>
<li>reward (gold) items</li>
<li>artifact items</li>
<li>other items</li>
</ul>
<hr>
<h3 id="reward-items">Reward items</h3>
<pre><code>Item  \_symbol\_  gold
item  \_symbol\_  gold  range  nn  to  mm
</code></pre>
<p>The first form creates a random amount of gold reward proportional to the player's current level. While the relation isn't exactly linear in player level, expect about 100 times the player's level when the quest begins. So for a level 2 player, expect the gold reward to be in the neighborhood of 200 gold.</p>
<p>_symbol_ is an arbitrary name to refer to the item throughout the quest scenario. It must be unique among all the item resources--the compiler will smack you if it isn't--and it is helpful to make it unique to all the symbol names you use in the Qbn section, as well as indicative of what the item is:</p>
<pre><code>Item \_reward\_ gold
Item \_bribe1\_ gold range 50 to 100
</code></pre>
<p>The second form of the reward item selects a random amount within the requested range. If the PC repeats the quest, that attempt won't necessarily have exactly the same reward amount.</p>
<p>This isn't always a bargain. Some players react to this with &quot;Goody, it's different this time.&quot; But others react with &quot;Boo! This quest isn't the same! What's wrong now?&quot;</p>
<p>To make a reward of an exact amount, use the same number for the beginning and end of the range.</p>
<p>Any Item command can be embellished to provide a message when the player chats about the item with another NPC.</p>
<pre><code>Item \_reward\_ gold anyInfo 1017
</code></pre>
<p>requests the <strong>X-engine</strong> to display Qrc message block 1017 when the gold reward is discussed with another NPC.</p>
<p>Every item command can be embellished to provide a message when the item is 'used' in the player's inventory screen.</p>
<pre><code>Item \_letter1\_ letter used 1022
</code></pre>
<p>requests the <strong>X-engine</strong> to display Qrc message block 1022 when the item is used in the player's inventory screen.</p>
<p>The two embellishments can be combined:</p>
<pre><code>Item \_letter1\_ letter anyInfo 1014 used 1022
</code></pre>
<hr>
<h3 id="artifact-items">Artifact items</h3>
<pre><code>Item  \_symbol\_  artifact  artifactName
</code></pre>
<p>describes an artifact item appearing in a quest. artifactName must be one of the known Tamriel artifacts:</p>
<p>Auriels_Bow</p>
<p>Oghma_Infinium</p>
<p>Auriels_Shield</p>
<p>Ring_of_Khajiit</p>
<p>Azuras_Star</p>
<p>Ring_of_Namira</p>
<p>Chrysamere</p>
<p>Sanguine_Rose</p>
<p>Ebony_Blade</p>
<p>Skeletons_Key</p>
<p>Ebony_Mail</p>
<p>Skull_of_Corruption</p>
<p>Hircine_Ring</p>
<p>Spell_Breaker</p>
<p>Lords_Mail</p>
<p>Staff_of_Magnus</p>
<p>Mace_of_Molag_Bal</p>
<p>Volendrung</p>
<p>Masque_of_Clavicus_Vile</p>
<p>Wabbajack</p>
<p>Necromancers_Amulet</p>
<p>Warlocks_Ring</p>
<p>As usual, case doesn't matter, but notice underscores (_) used instead of blanks. You can, however, change the names to your own liking by editing items.src. Indeed you can change most of the compiler's notion of spelling by editing any of the *.src files to your own preferences.</p>
<p>The artifact item command can be embellished with an anyInfo notice. Some item artifacts in the existing quests from Bethesda are embellished with the used tag, but this is inconsistent. When an artifact is used in the inventory screen, the message displayed is invariably taken from TEXT.RSC, not the Qrc block.</p>
<hr>
<h3 id="other-items">Other items</h3>
<pre><code>Item  \_symbol\_  someItemName
Item  \_symbol\_  item  class nn  subclass mm
</code></pre>
<p>Some common items are prefabricated in the items.src data base. <strong>Daggerfall</strong> also uses a sort of generic item specification, to select randomly one item from a group of related items. These forms are shown in <strong><em>italics</em></strong> in the following table.</p>
<p>aegrostat</p>
<p>amulet</p>
<p>armbands</p>
<p><strong><em>armor</em></strong></p>
<p><strong><em>book</em></strong></p>
<p>book0</p>
<p>book1</p>
<p>book2</p>
<p>book3</p>
<p>boots</p>
<p>bracelet</p>
<p>bracer</p>
<p>cloth_amulet</p>
<p>coins</p>
<p>common_symbol</p>
<p>daedra_heart</p>
<p>decanter</p>
<p><strong><em>deed</em></strong></p>
<p>diamond</p>
<p><strong><em>drug</em></strong></p>
<p><strong><em>element</em></strong></p>
<p>emerald</p>
<p>finger</p>
<p><strong><em>flamable</em></strong></p>
<p><strong><em>gem</em></strong></p>
<p>gold_bar</p>
<p>harpy_feather</p>
<p>horn</p>
<p>indulcet</p>
<p>ivory</p>
<p>jade</p>
<p><strong><em>junk</em></strong></p>
<p>kimono</p>
<p>lantern</p>
<p><strong><em>large_plant</em></strong></p>
<p>large_sack</p>
<p>letter</p>
<p>lich_dust</p>
<p>lodestone</p>
<p><strong><em>magic_item</em></strong></p>
<p>malachite</p>
<p>mantella_crux</p>
<p><strong><em>map</em></strong></p>
<p>mark</p>
<p><strong><em>mens_clothing</em></strong></p>
<p><strong><em>mineral</em></strong></p>
<p><strong><em>misc</em></strong></p>
<p>mummy_wrappings</p>
<p><strong><em>mythic</em></strong></p>
<p><strong><em>organs</em></strong></p>
<p><strong><em>painting</em></strong></p>
<p>pearl</p>
<p>portrait</p>
<p>quaesto_vil</p>
<p>random_map</p>
<p>random_recipe</p>
<p><strong><em>religious</em></strong></p>
<p>ring</p>
<p>root_tendrils</p>
<p>ruby</p>
<p>sapphire</p>
<p>scarab</p>
<p><strong><em>skin</em></strong></p>
<p><strong><em>small_plant</em></strong></p>
<p>small_sack</p>
<p>snake_venom</p>
<p><strong><em>specials</em></strong></p>
<p>straps</p>
<p>sursam</p>
<p>talisman</p>
<p>telescope</p>
<p>torc</p>
<p>totem</p>
<p><strong><em>transport</em></strong></p>
<p><strong><em>trinket</em></strong></p>
<p>turquoise</p>
<p>tusk</p>
<p>wand</p>
<p><strong><em>weapon</em></strong></p>
<p>werewolf_blood</p>
<p><strong><em>womens_clothing</em></strong></p>
<p>womens_robe</p>
<p>wraith_essence</p>
<p>yellow_flowers</p>
<p>Other items can be created at will by using the class/subclass form to describe any <strong>Daggerfall</strong> item.</p>
<p>Again, the item command can be further embellished with an anyInfo notice and/or a used notice.</p>
<p>You can find tables of the known <strong>Daggerfall</strong> item codes at the <em>Unofficial Elder Scrolls' Pages</em>.</p>
<hr>
<h3 id="quest-persons">Quest Persons</h3>
<p>Each NPC involved in a quest has to be described in the Qbn section with a Person command. Most quests will have at least one Person command to describe the questor NPC granting the quest to the player. This appears to be how the <strong>X-engine</strong> couples the change of repute to the allied/enemy factions associated with the questor when the PC completes or fails the quest.</p>
<p>Factional alliances / repudiations are fairly involved in <strong>Daggerfall</strong>. This document won't treat all aspects of factions or how to choose correct factions for a quest. Basically it just depends on the goals of the quest.</p>
<p>Briefly, the <strong>Daggerfall</strong> social structure forms a four-tier hierarchy of Guild-Group, Social Group, Faction Type, Individual-Faction. Unfortunately I haven't been able to determine the magic numbers used to describe Social Groups in the Qbn files. The elements of the remaining classifications are, however, known.</p>
<p>For example, Clavicus Vile, a Daedra, Supernatural Being, of Oblivion. The guild-group name is <em>Oblivion</em>, the social group is <em>Supernatural Being</em>, the faction-type is <em>Daedra</em>, and the individual-faction is <em>Clavicus Vile</em>.</p>
<p>Or another example, The Battlelords subgroup of the Guild Members of the Knightly Order. The guild-group name is <em>Knightly Order</em>, the social group is <em>Guild Members</em>, the faction-type is <em>Subgroup</em>, and the individual-faction is <em>The Battlelords</em>.</p>
<p>All the non-permanent NPCs in the game can be so classified.</p>
<p>Permanent NPCs are slightly different, in that they have no top level guild-group name. For example, King Gothryd, a person of nobility. The social group is <em>nobility</em>, the faction-type is <em>person</em>, and the individual-faction is <em>King Gothryd</em>.</p>
<p>For the nonce, NPCs can be selected by faction type, guild group, individual faction, or permanent NPC.</p>
<p>As with <em>Items</em>, message blocks can be associated with NPCs in two different ways.</p>
<p>anyInfo nn adds the Qrc message <em>nn</em> to the Tell me about... dialog responses under the NPC's name.</p>
<p>rumors nn adds the Qrc message <em>nn</em> as a possible response when gossiping in the dialog panel under <em>Any News?</em>. Under patch 213 it also adds the NPC's name to the dialog list of choices, even if there is no anyInfo nn entry for the NPC.</p>
<p>These tags can be appended to any Person command.</p>
<hr>
<h3 id="permanent-npc">Permanent NPC</h3>
<p>Basically, a permanent NPC is one of the named major figures of the royal houses in Daggerfall, Sentinel, or Wayrest, or supernatural figures like the King of Worms. They are all generally involved in the main quest in one way or another.</p>
<p>The Person command tags a permanent NPC with the named field, since all permanent NPCs have invarient names within the game.</p>
<p>Permanent NPCs can be used in one of two ways. They can be located at their regular place in the game world, which the Person command tags as atHome. So the player would encounter a permanent NPC at their normal place in the game world.</p>
<p>Alternatively, the permanent NPC can be positioned elsewhere in the Bay area for the duration of the quest. The <strong>X-engine</strong> needs to be told up front which you plan to do so it can do all the necessary bookkeeping to keep the NPC portraits managed correctly.</p>
<p>Be aware that fiddling with the NPCs associated with the main story in side-quests can have surprising side-effects. Recall that it is always possible for the PC to have several quests operating concurrently.</p>
<p>It's even possible to have multiple copies of the same side-quest active at the same time. Consider the typical mage guild quest to fetch a rare ingredient from a dungeon. It's perfectly possible to pick up that quest from the guild in Wayrest, say, and immediately teleport to Sentinel and acquire the same quest from the guild hall there.</p>
<p>You need to consider consequences of that sort if you use permanent NPCs in a quest offered from more than one location in the game world. It probably isn't realistic to expect the <strong>X-engine</strong> to situate the King of Worms in two different places at the same time.</p>
<p>The quest condition <code>[_faction available_](#factionfree)</code> can help to determine whether a permanent NPC is presently starring in another quest.</p>
<pre><code>Person  \_symbol\_  named  aPermanentNPC
Person  \_symbol\_  named  aPermanentNPC  atHome
</code></pre>
<p>The complete list of permanent NPCs is shown below.</p>
<p>Azura</p>
<p>Baltham_Greyman</p>
<p>Baron_Shrike</p>
<p>Baroness_Dh'emka</p>
<p>Boethiah</p>
<p>Br'itsa</p>
<p>Charvek-si</p>
<p>Chulmore_Quill</p>
<p>Clavicus_Vile</p>
<p>Farrington</p>
<p>Gortwog</p>
<p>Hermaeus_Mora</p>
<p>Hircine</p>
<p>Karethys</p>
<p>King_Eadwyre</p>
<p>King_Gothryd</p>
<p>King_of_Worms</p>
<p>Lady_Bridwell</p>
<p>Lady_Brisienna</p>
<p>Lady_Doryanna_Flyte</p>
<p>Lord_Auberon_Flyte</p>
<p>Lord_Bertram_Spode</p>
<p>Lord_Bridwell</p>
<p>Lord_Castellian</p>
<p>Lord_Coulder</p>
<p>Lord_Darkworth</p>
<p>Lord_Harth</p>
<p>Lord_K'avar</p>
<p>Lord_Khane</p>
<p>Lord_Kilbar</p>
<p>Lord_Perwright</p>
<p>Lord_Plessington</p>
<p>Lord_Provlith</p>
<p>Lord_Quistley</p>
<p>Lord_Vhosek</p>
<p>Lord_Woodborne</p>
<p>Malacath</p>
<p>Medora</p>
<p>Mehrunes_Dagon</p>
<p>Mephala</p>
<p>Meridia</p>
<p>Mobar</p>
<p>Molag_Bal</p>
<p>Mynisera</p>
<p>Namira</p>
<p>Nocturnal</p>
<p>Nulfaga</p>
<p>Orsinium</p>
<p>Peryite</p>
<p>Popudax</p>
<p>Prince_Greklith</p>
<p>Prince_Helseth</p>
<p>Prince_Lhotun</p>
<p>Princess_Elysana</p>
<p>Princess_Morgiah</p>
<p>Queen_Akorithi</p>
<p>Queen_Aubk-i</p>
<p>Queen_Barenziah</p>
<p>Sanguine</p>
<p>Sheogorath</p>
<p>Skakmat</p>
<p>Sylch_Greenwood</p>
<p>Thaik</p>
<p>The_Crow</p>
<p>The_Night_Mother</p>
<p>The_Squid</p>
<p>The_Underking</p>
<p>Thyr_Topfield</p>
<p>Vaernima</p>
<p>Whitka</p>
<pre><code>Person \_qMother\_ named mynisera
</code></pre>
<p>creates the queen mother Mynisera as an NPC in a quest. She'll be teleported to a remote spot by the start-up task of the quest.</p>
<p>Note that you may easily confuse the player if your quest, say, teleports the King of Worms away somewhere while the player is off to fetch the lich soul for him as part of the main story. On the other hand, it might serve an interesting twist to the main plot.</p>
<hr>
<h3 id="faction-type">Faction Type</h3>
<p>An NPC can be created with an affiliation with one of the twenty-odd factions to control how the success or failure of the player in the quest is spread among the Iliac Bay inhabitants.</p>
<pre><code>Person  \_symbol\_  factionType  aFactionName
Person  \_symbol\_  factionType  aFactionName  female
Person  \_symbol\_  factionType  aFactionName  male
</code></pre>
<p>where aFactionName is one of the known faction types:</p>
<p>Court</p>
<p>People</p>
<p>Daedra</p>
<p>Person</p>
<p>Generic_Group</p>
<p>Region</p>
<p>God</p>
<p>Subgroup</p>
<p>Group</p>
<p>Temple</p>
<p>Knightly_Guard</p>
<p>Thieves_Den</p>
<p>Magic_User</p>
<p>Vampire_Clan</p>
<p>Official</p>
<p>Witches_Coven</p>
<p>You can use the generic name Faction to select a faction at random when the quest begins.</p>
<p>The first form of the Person command picks the gender of the NPC at random, while the latter two forms request a specific gender.</p>
<p>anyInfo nn and rumors nn tags can be appended to supply message block numbers to use in the dialog screen.</p>
<pre><code>Person \_npc1\_ factionType temple male
</code></pre>
<p>would select a male NPC allied with the temple crowd.</p>
<hr>
<h3 id="group-alliances">Group Alliances</h3>
<p>An NPC can be created with an affiliation for one of the occupations found in Tamriel.</p>
<pre><code>Person  \_symbol\_  group  aGroupName
Person  \_symbol\_  group  aGroupName  female
Person  \_symbol\_  group  aGroupName  male
</code></pre>
<p>where aGroupName is one of the social groups/guilds:</p>
<p>Armorer</p>
<p>Jeweler</p>
<p>Resident3</p>
<p>Banker</p>
<p>Librarian</p>
<p>Resident4</p>
<p>Bookseller</p>
<p>Noble</p>
<p>Shopkeeper</p>
<p>Carpenter</p>
<p>Pawnbroker</p>
<p>Smith</p>
<p>Chemist</p>
<p>Questor</p>
<p>Spellcaster</p>
<p>Cleric</p>
<p>Resident1</p>
<p>Tailor</p>
<p>Innkeeper</p>
<p>Resident2</p>
<p>By coordinating the occupation of the NPC with site selection, you can control the venue that your NPCs appear in. Selecting a spellcaster as an NPC and a mage's guild hall for a site ensures the resulting sprite will be one the player is accustomed to finding in that locale. See <code>[_Local and Remote Sites_](#localsites)</code> for additional information.</p>
<p>The first form of the Person command picks the gender of the NPC at random, while the later two forms request a specific gender.</p>
<p>anyInfo nn and rumors nn tags can be appended to supply message block numbers to use in the dialog screen.</p>
<pre><code>Person \_npc1\_ group pawnbroker
</code></pre>
<p>would select an NPC allied with the pawnbrokers. The gender of the NPC is taken at random.</p>
<hr>
<h3 id="faction-alliances">Faction Alliances</h3>
<p>An NPC can be created with an affiliation with a specific faction in the game.</p>
<pre><code>Person  \_symbol\_  faction  aFactionName
Person  \_symbol\_  faction  aFactionName  female
Person  \_symbol\_  faction  aFactionName  male
</code></pre>
<p>where aFactionName is one of the 400-odd factions from the table below.</p>
<p>Abibon-Gora</p>
<p>Agents_of_The_Underking</p>
<p>Akatosh</p>
<p>Alcaire</p>
<p>Alik'ra</p>
<p>Anticlere</p>
<p>Antiphyllos</p>
<p>Apothecaries_of_Akatosh</p>
<p>Apothecaries_of_Arkay</p>
<p>Apothecaries_of_Dibella</p>
<p>Apothecaries_of_Mara</p>
<p>Apothecaries_of_Stendarr</p>
<p>Apothecaries_of_Z'en</p>
<p>Arkay</p>
<p>Ayasofya</p>
<p>Bergama</p>
<p>Betony</p>
<p>Bhoraine</p>
<p>Binders_of_Arkay</p>
<p>Children</p>
<p>Court_of_Abibon-Gora</p>
<p>Court_of_Alcaire</p>
<p>Court_of_Alik'ra</p>
<p>Court_of_Anticlere</p>
<p>Court_of_Antiphyllos</p>
<p>Court_of_Ayasofya</p>
<p>Court_of_Balfiera</p>
<p>Court_of_Bergama</p>
<p>Court_of_Betony</p>
<p>Court_of_Bhoraine</p>
<p>Court_of_Cybiades</p>
<p>Court_of_Daenia</p>
<p>Court_of_Daggerfall</p>
<p>Court_of_Dak'fron</p>
<p>Court_of_Dragontail</p>
<p>Court_of_Dwynnen</p>
<p>Court_of_Ephesus</p>
<p>Court_of_Gavaudon</p>
<p>Court_of_Glenpoint</p>
<p>Court_of_Glenumbra_Moors</p>
<p>Court_of_Ilessen_Hills</p>
<p>Court_of_Kairou</p>
<p>Court_of_Kambria</p>
<p>Court_of_Koegria</p>
<p>Court_of_Koegria</p>
<p>Court_of_Kozanset</p>
<p>Court_of_Lainlyn</p>
<p>Court_of_Menevia</p>
<p>Court_of_Mournoth</p>
<p>Court_of_Myrkwasa</p>
<p>Court_of_Northmoor</p>
<p>Court_of_Orsinium</p>
<p>Court_of_Phrygia</p>
<p>Court_of_Pothago</p>
<p>Court_of_Santaki</p>
<p>Court_of_Satakalaam</p>
<p>Court_of_Sentinel</p>
<p>Court_of_Tigonus</p>
<p>Court_of_Totambu</p>
<p>Court_of_Tulune</p>
<p>Court_of_Urvaius</p>
<p>Court_of_Wayrest</p>
<p>Court_of_Wrothgaria</p>
<p>Court_of_Ykalon</p>
<p>Crafters_of_Julianos</p>
<p>Cybiades</p>
<p>Cyndassa</p>
<p>Daenia</p>
<p>Daggerfall</p>
<p>Dak'fron</p>
<p>Dancers</p>
<p>Dark_Binders</p>
<p>Dark_Mixers</p>
<p>Dark_Plotters</p>
<p>Dark_Slayers</p>
<p>Dark_Trainers</p>
<p>Default</p>
<p>Dibella</p>
<p>Dragontail</p>
<p>Dwynnen</p>
<p>Ebonarm</p>
<p>Enchanters_of_Kynareth</p>
<p>Ephesus</p>
<p>Fighter_Equippers</p>
<p>Fighter_Questers</p>
<p>Fighter_Trainers</p>
<p>Gavaudon</p>
<p>Generic_Knightly_Order</p>
<p>Generic_Temple</p>
<p>Glenpoint</p>
<p>Glenumbra_Moors</p>
<p>Healers</p>
<p>Ilessan_Hills</p>
<p>Isle_of_Balfiera</p>
<p>Julianos</p>
<p>Kairou</p>
<p>Kambria</p>
<p>Koegria</p>
<p>Kozanset</p>
<p>Kynareth</p>
<p>Lady_Northbridge</p>
<p>Lainlyn</p>
<p>Mara</p>
<p>Menevia</p>
<p>Mixers_of_Akatosh</p>
<p>Mixers_of_Arkay</p>
<p>Mixers_of_Dibella</p>
<p>Mixers_of_Mara</p>
<p>Mixers_of_Stendarr</p>
<p>Mixers_of_Z'en</p>
<p>Mournoth</p>
<p>Myrkwasa</p>
<p>Northmoor</p>
<p>Oblivion</p>
<p>Orsinium</p>
<p>People_of_Abibon-Gora</p>
<p>People_of_Alcaire</p>
<p>People_of_Alik'ra</p>
<p>People_of_Anticlere</p>
<p>People_of_Antiphyllos</p>
<p>People_of_Ayasofya</p>
<p>People_of_Balfiera</p>
<p>People_of_Bergama</p>
<p>People_of_Betony</p>
<p>People_of_Bhoraine</p>
<p>People_of_Cybiades</p>
<p>People_of_Daenia</p>
<p>People_of_Daggerfall</p>
<p>People_of_Dak'fron</p>
<p>People_of_Dragontail</p>
<p>People_of_Dwynnen</p>
<p>People_of_Ephesus</p>
<p>People_of_Gavaudon</p>
<p>People_of_Glenpoint</p>
<p>People_of_Glenumbra_Moors</p>
<p>People_of_Ilessen_Hills</p>
<p>People_of_Kairou</p>
<p>People_of_Kambria</p>
<p>People_of_Koegria</p>
<p>People_of_Koegria</p>
<p>People_of_Kozanset</p>
<p>People_of_Lainlyn</p>
<p>People_of_Menevia</p>
<p>People_of_Mournoth</p>
<p>People_of_Myrkwasa</p>
<p>People_of_Northmoor</p>
<p>People_of_Orsinium</p>
<p>People_of_Phrygia</p>
<p>People_of_Pothago</p>
<p>People_of_Santaki</p>
<p>People_of_Satakalaam</p>
<p>People_of_Sentinel</p>
<p>People_of_Tigonus</p>
<p>People_of_Totambu</p>
<p>People_of_Tulune</p>
<p>People_of_Urvaius</p>
<p>People_of_Wayrest</p>
<p>People_of_Wrothgaria</p>
<p>People_of_Ykalon</p>
<p>Phrygia</p>
<p>Pothago</p>
<p>Questers</p>
<p>Random_Knight</p>
<p>Random_Noble</p>
<p>Random_Ruler</p>
<p>Santaki</p>
<p>Satakalaam</p>
<p>Secret_of_Oblivion</p>
<p>Seneschal</p>
<p>Sentinel</p>
<p>Shalgora</p>
<p>Smiths</p>
<p>Smiths_of_Julianos</p>
<p>Spellsmiths_of_Kynareth</p>
<p>Stendarr</p>
<p>Summoners_of_Akatosh</p>
<p>Summoners_of_Arkay</p>
<p>Summoners_of_Dibella</p>
<p>Summoners_of_Julianos</p>
<p>Summoners_of_Kynareth</p>
<p>Summoners_of_Mara</p>
<p>Summoners_of_Stendarr</p>
<p>Summonists_of_Z'en</p>
<p>Teachers_of_Akatosh</p>
<p>Teachers_of_Arkay</p>
<p>Teachers_of_Dibella</p>
<p>Teachers_of_Julianos</p>
<p>Teachers_of_Kynareth</p>
<p>Teachers_of_Mara</p>
<p>Teachers_of_Stendarr</p>
<p>Teachers_of_z'en</p>
<p>Temple_Blessers</p>
<p>Temple_Healers</p>
<p>Temple_Missionaries</p>
<p>Temple_Treasurers</p>
<p>The_Academics</p>
<p>The_Acolyte</p>
<p>The_Akatosh_Chantry</p>
<p>The_Anthotis</p>
<p>The_Archmagister</p>
<p>The_Bards</p>
<p>The_Battlelords</p>
<p>The_Beldama</p>
<p>The_Benevolence_of_Mara</p>
<p>The_Blades</p>
<p>The_Cabal</p>
<p>The_Citadel_of_Ebonarm</p>
<p>The_Crafters</p>
<p>The_Crow</p>
<p>The_Crusaders</p>
<p>The_Daggerfall_Witches</p>
<p>The_Dark_Brotherhood</p>
<p>The_Daughters_of_Wroth</p>
<p>The_Dust_Witches</p>
<p>The_Fey</p>
<p>The_Fighters_Guild</p>
<p>The_Garlythi</p>
<p>The_Glenmoril_Witches</p>
<p>The_Great_Knight</p>
<p>The_Guildmagister</p>
<p>The_Haarvenu</p>
<p>The_Host_of_the_Horn</p>
<p>The_Host_of_the_True_Horn</p>
<p>The_House_of_Dibella</p>
<p>The_Isolationists</p>
<p>The_Khulari</p>
<p>The_Knights_Mentor</p>
<p>The_Knights_of_Iron</p>
<p>The_Knights_of_the_Circle</p>
<p>The_Knights_of_the_Dragon</p>
<p>The_Knights_of_the_Flame</p>
<p>The_Knights_of_the_Hawk</p>
<p>The_Knights_of_the_Owl</p>
<p>The_Knights_of_the_Rose</p>
<p>The_Knights_of_the_Wheel</p>
<p>The_Kynaran_Order</p>
<p>The_Lyrezi</p>
<p>The_Mages_Guild</p>
<p>The_Maran_Knights</p>
<p>The_Master_at_Arms</p>
<p>The_Master_of_Academia</p>
<p>The_Master_of_Incunabula</p>
<p>The_Master_of_Initiates</p>
<p>The_Master_of_Initiates2</p>
<p>The_Master_of_the_Scry</p>
<p>The_Mercenary_Mages</p>
<p>The_Merchants</p>
<p>The_Montalion</p>
<p>The_Mountain_Witches</p>
<p>The_Necromancers</p>
<p>The_Odylic_Mages</p>
<p>The_Oracle</p>
<p>The_Order_of_Arkay</p>
<p>The_Order_of_the_Candle</p>
<p>The_Order_of_the_Cup</p>
<p>The_Order_of_the_Hour</p>
<p>The_Order_of_the_Lamp</p>
<p>The_Order_of_the_Lily</p>
<p>The_Order_of_the_Raven</p>
<p>The_Order_of_the_Scarab</p>
<p>The_Palatinus</p>
<p>The_Patricians</p>
<p>The_Prostitutes</p>
<p>The_Quill_Circus</p>
<p>The_Resolution_of_Z'en</p>
<p>The_Royal_Guard</p>
<p>The_Royal_Guards</p>
<p>The_School_of_Julianos</p>
<p>The_Selenu</p>
<p>The_Septim_Empire</p>
<p>The_Shadow_Appraisers</p>
<p>The_Shadow_Schemers</p>
<p>The_Shadow_Spies</p>
<p>The_Shadow_Trainers</p>
<p>The_Sisters_of_Kykos</p>
<p>The_Sisters_of_the_Bluff</p>
<p>The_Skeffington_Witches</p>
<p>The_Tamarilyn_Witches</p>
<p>The_Temple_of_Kynareth</p>
<p>The_Temple_of_Stendarr</p>
<p>The_Thieves_Guild</p>
<p>The_Thrafey</p>
<p>The_Tide_Witches</p>
<p>The_Travelers_League</p>
<p>The_Utility_Mages</p>
<p>The_Vraseth</p>
<p>The_Witches_of_Alcaire</p>
<p>The_Witches_of_Devilrock</p>
<p>The_Witches_of_the_Marsh</p>
<p>Thyr_Topfield</p>
<p>Tigonus</p>
<p>Totambu</p>
<p>Tulune</p>
<p>Urvaius</p>
<p>Venom_Masters</p>
<p>Wayrest</p>
<p>Wrothgaria</p>
<p>Ykalon</p>
<p>Zen</p>
<p>The first form of the Person command picks the gender of the NPC at random, while the later two forms request a specific gender.</p>
<p>anyInfo nn and rumors nn tags can be appended to supply message block numbers to use in the dialog screen.</p>
<pre><code>Person \_lamper\_ faction The\_Order\_of\_the\_Lamp anyInfo 1031
</code></pre>
<p>would select an NPC allied with The Order of the Lamp. Qrc message block 1031 is associated with the Tell me about.. dialog option of the game. The gender of the NPC is taken at random. (Although for the Order of the Lamp, females are rendered by male images as it happens)</p>
<hr>
<h3 id="quest-places">Quest Places</h3>
<p>Different locations can be associated with a quest. For example, the PC may have to steal something from a shop, scour a dungeon for some special ingredient, or what have you. These places must be tracked both by the <strong>X-engine</strong> and the quest itself (You might want something special to happen when the PC arrives at a quest location)</p>
<p>A Place command is used to describe each place a PC might visit in the quest where something out of the ordinary may take place in pursuit of the quest goal.</p>
<p>Message blocks can be associated with locations in two different ways.</p>
<p>anyInfo nn adds the Qrc message nn to the Tell me about.. dialog responses.</p>
<p>rumors nn adds the Qrc message nn to the rumors to spread when the PC asks for <em>Any News?</em> in the dialog panel.</p>
<p>These tags can be appended to any Place command. Although, beware that adding a remote dungeon to the pick list under the <em>Tell me about...</em> dialog tab doesn't always do the right thing.</p>
<p>Instead of displaying the name of the dungeon in the pick list, <strong>X-Engine</strong> usually displays the name of a fictitious alchemy shop. However, rumors spread through the <em>Any News?</em> query will display the remote dungeon name properly.</p>
<p>This unfortunate side-effect can be mitigated somewhat, by using the <code>[_dialog link_](#rumor5)</code> command to suppress the entry of the bogus shop name in the pick list.</p>
<p>Quest locations are divided into three groups:</p>
<ul>
<li>permanent sites</li>
<li>local sites</li>
<li>remote sites.</li>
</ul>
<hr>
<h3 id="permanent-sites">Permanent Sites</h3>
<p>A permanent site is one that appears the same for every <strong>Daggerfall</strong> incarnation, and they are the obvious main story 'hot spots': Sentinel, Wayrest, Daggerfall, Dirinni Tower, Scourg Burrow, and so forth. Your quest is free to send the PC on a romp through Castle Daggerfall or Medora's tower if you want to.</p>
<pre><code>Place  \_symbol\_  permanent  aPermanentPlace
</code></pre>
<p>where aPermanentPlace is one of the permanent <strong>Daggerfall</strong> sites. Some places have several forms, each of which indicates a different location within the dungeon that the teleport cheat travels to. These are used to indicate specific rooms in the castle dungeons, or rooms along the chain of teleport cheats for other dungeons.</p>
<p>DaggerfallCity1</p>
<p>MantellanCrux</p>
<p>Sentinel4</p>
<p>DaggerfallCity2</p>
<p>OrsiniumCastle1</p>
<p>Shedungent1</p>
<p>DaggerfallCastle1</p>
<p>OrsiniumCastle2</p>
<p>Shedungent2</p>
<p>DaggerfallCastle2</p>
<p>OrsiniumCastle3</p>
<p>Shedungent4</p>
<p>DirenniTower</p>
<p>OrsiniumCastle4</p>
<p>Skeffingcoven</p>
<p>GlenmorilCoven</p>
<p>PirateerHold1</p>
<p>TotambuCoven</p>
<p>KykosCoven</p>
<p>PirateerHold2</p>
<p>WayrestCastle</p>
<p>LlugwychCastle</p>
<p>ScourgBarrow1</p>
<p>WoodbourneHall4</p>
<p>LysandusTomb1</p>
<p>ScourgBarrow2</p>
<p>WoodbourneHall5</p>
<p>LysandusTomb2</p>
<p>SentinelCastle</p>
<p>If you choose a permanent location, you may need to make it visible on the proper province map. The three main castles and the starting dungeon are always present on the province map. The dungeons for Lysandus' tomb, Nulfagu, etc are initially absent from the travel map.</p>
<p>The <code>[reveal](#revealglobal)</code> quest action can put permanent sites on the travel map.</p>
<p>Note also, that quest locations specified as permanent do not have their _symbol_ substituted properly in Qrc text blocks. So their names must be written out in full in any Qrc messages refering to that site.</p>
<hr>
<h3 id="local-sites">Local Sites</h3>
<p>A quest can associate a house or shop in the town currently occupied by the PC--there are no local dungeons in <strong>Daggerfall</strong>.</p>
<pre><code>Place  \_symbol\_  local  aLocalSite
</code></pre>
<p>where aLocalSite is:</p>
<p>apothecary</p>
<p>house1</p>
<p>palace</p>
<p>armory</p>
<p>house2</p>
<p>pawnshop</p>
<p>bank</p>
<p>house3</p>
<p>random</p>
<p>bookstore</p>
<p>house4</p>
<p>tavern</p>
<p>clothingshop</p>
<p>jewelryshop</p>
<p>temple</p>
<p>furnitureshop</p>
<p>library</p>
<p>weaponstore</p>
<p>generalstore</p>
<p>magery</p>
<p>house1 through house4 select between different styles of <strong>Daggerfall</strong> homes. Random selects the type of shop at random when the quest begins.</p>
<hr>
<h3 id="remote-sites">Remote Sites</h3>
<p>A quest can associate a house or shop in a remote town, or it can associate a remote dungeon with the quest.</p>
<pre><code>Place  \_symbol\_  remote  aRemoteSite
</code></pre>
<p>where aRemoteSite is:</p>
<p>apothecary</p>
<p>generalstore</p>
<p>magery</p>
<p>armory</p>
<p>house1</p>
<p>palace</p>
<p>bank</p>
<p>house2</p>
<p>pawnshop</p>
<p>bookstore</p>
<p>house3</p>
<p>random</p>
<p>clothingshop</p>
<p>house4</p>
<p>tavern</p>
<p>dungeon</p>
<p>jewelryshop</p>
<p>temple</p>
<p>furnitureshop</p>
<p>library</p>
<p>weaponstore</p>
<p>When you specify a remote place, <strong>X-engine</strong> selects a location in the current province that has the type of remote site requested.</p>
<p>Note that this sometimes means the current location will be selected if it satisfies the site criteria. Really, <em>local</em> implies that no distant travel will be required, while <em>remote</em> implies that distant travel is optional.</p>
<p>Although there are no local dungeons, your quest scenario may request one. Why would you want to do this? One reason is to hide another quest resource where you are certain the PC can not locate it. Selecting a different remote dungeon that the quest does not reveal is not a certain guarantee that the PC can not locate the resource in the other dungeon. After all, the other dungeon may already be visible on the province map from an earlier quest. The present quest has no way of determining this fact.</p>
<hr>
<h3 id="quest-clocks">Quest Clocks</h3>
<p>Quests can associate time limits or durations to various parts of the quest by creating clocks to time events. Clocks specify how much time must elapse before a task in the condition/response section is activated.</p>
<p>Clocks can specify an absolute amount of time, or a range of time, or a random amount of time. Use an extended version of clock time format to specify an amount of time:</p>
<pre><code>days.hours:minutes
</code></pre>
<p>so 1.4:45 represents a time 1 day, 4 hours and 45 minutes in the future.</p>
<pre><code>Clock  \_symbol\_
</code></pre>
<p>creates a clock with a random amount of time to run.</p>
<pre><code>Clock  \_symbol\_  dd.hh:mm
</code></pre>
<p>creates a clock that runs down in dd days, hh hours, and mm minutes.</p>
<pre><code>Clock  \_symbol\_  dd.hh:mm  aa.bb:cc
</code></pre>
<p>creates a clock that runs down between dd.hh:mm and aa.bb:cc.</p>
<p>The symbol assigned to a clock also names a task in the condition/ response section of the Qbn file. When the timer runs out, that task is actived in response to the time-out.</p>
<p>Note that a Clock resource doesn't automatically start ticking, and must be started by using the <code>[_start timer_](#starttimer)</code> action.</p>
<hr>
<h3 id="quest-enemies">Quest Enemies</h3>
<p>Quests can create specific enemies to plague the PC with.</p>
<pre><code>Foe  \_symbol\_  is  anEnemy
Foe  \_symbol\_  is  nn  anEnemy
</code></pre>
<p>The first form creates a single foe of type anEnemy while the second form creates nn foes of type anEnemy.</p>
<p>Please see the file foes.src for the complete list of quest foes.</p>
<pre><code>Foe  \_angryMages\_  17 mage
</code></pre>
<p>would describe a mob of seventeen (17) mages.</p>
<p>Unlike quest NPCs or places, quest foes must be installed in the game world through actions in the condition/response section of the quest file.</p>
</ce></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TheLacus/daggerfall-unity-docs/blob/master/modding/QuestOrganization.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
