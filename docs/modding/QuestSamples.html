<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sample quests </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Sample quests ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="sample-quests">Sample quests</h2>

<h3 id="lady-brisienna">Lady Brisienna</h3>
<p>Lady Brisienna starts the player character off on the first quest when the game begins. The decompiler renders her quest as follows.</p>
<p>-- Quest: /dos/g/game/dag/arena2/_brisien.qbn.
-- StartsBy: letter
-- Questee: anyone
-- Repute: 0
-- QuestId: 0
Quest: _brisien
-- Message panels
QRC:</p>
<p>RefuseQuest:  [1001]
Error: Questtext 1001 called on BRISIEN.Q</p>
<p>AcceptQuest:  [1002]
Error: Questtext 1002 called on BRISIEN.Q</p>
<p>QuestFail:  [1003]
Error: Questtext 1003 called on BRISIEN.Q</p>
<p>RumorsDuringQuest:  [1005]
The prophets say that soon what was unclaimed will be claimed.
&lt;---&gt;
Lady Brisienna awaits someone at _dirtypit_ in __dirtypit_.
&lt;---&gt;
That was some storm. Magically created, many are saying.
&lt;---&gt;
Lady Brisienna has taken up lodging at _dirtypit_ in __dirtypit_.</p>
<p>RumorsPostfailure:  [1006]
Lady Brisienna has left _dirtypit_, muttering about traitors to the Empire.</p>
<p>RumorsPostsuccess:  [1007]
Lady Brisienna has left _dirtypit_. She must've found who she was looking for.</p>
<p>QuestorPostsuccess:  [1008]
<ce>        I hope your investigations are going well so far, %pcf.
<ce><br>
<ce>                               -- Lady B.<p>
<p>QuestLogEntry:  [1010]
%qdt:
I am on a mission from the emperor to investigate
the shade of King Lysandus. His spirit has been
haunting the city of Daggerfall. The emperor
himself has charged me with the duty of laying
his ghost to rest.
There is also the minor matter of a letter
he sent to the Queen of Daggerfall. If I should
find out what happened to the letter, he would be
most appreciative.
Before landing in Daggerfall, a sudden storm
capsized the ship. I barely made it into this cave.</p>
<p>Message:  1011
%qdt:
I met with Lady Brisienna in a tavern room. She
told me that the three major powers of the Iliac
bay are Daggerfall, Wayrest, and Sentinel. If I
am to investigate the mystery of Lysandus' ghost,
I should start by speaking with the royal families
of these fiefdoms.</p>
<p>Message:  1012
Lady Magnessen? She's the emmisary of the Blades in Daggerfall.
&lt;---&gt;
Lady Magnessen is a part of the set regularly at Castle Daggerfall.
&lt;---&gt;
Lady Magnessen was formerly in the employ of Mynisera, when she was Queen.</p>
<p>Message:  1013
Lady Magnessen once worked for the Queen Mother, but always for the Emperor.
&lt;---&gt;
Lady Magnessen is the sister of the Great Knight, leader of the Blades.
&lt;---&gt;
I heard Lady Magnessen was accused of spying. Nobody knows where she is now.</p>
<p>Message:  1015
<ce>              Ah, thank you for responding to my letter,
<ce>                     %pcf. I am Lady Brisienna. Let
<ce>              me bring you to date on affairs. The spectre
<ce>                 of King Lysandus haunts the streets of
<ce>               Daggerfall at night. Trying to communicate
<ce>                with him is futile. He will occasionally
<ce>               moan the word &quot;Vengeance,&quot; but that is the
<ce>                only coherent word I have ever heard him
<ce>              utter. If you are ever in Daggerfall, do not
<ce>              wander the city at night. You are certain to
<ce>                  be attacked by his legion of ghosts.
<ce><br>
<ce>                  It would be probably more gainful to
<ce>                investigate those who might have wronged
<ce>             Lysandus to find the cause behind his torment.
<ce>            I do not know if the royal family of Daggerfall
<ce>                or another person or persons merit more
<ce>                suspicion. The major powers of the Bay,
<ce>                Sentinel, Wayrest, and Daggerfall may be
<ce>                         good places to start.
<ce>                             (continued...)<p>
<p>Message:  1016
<ce>              In the matter of the letter, the Emperor's
<ce>             agent says that he was unable to hand-deliver
<ce>             it to the Queen because of the war. He hired a
<ce>              courier who supposedly delivered the letter
<ce>             in his stead. We do not even know the name of
<ce>                this courier. Obviously, there is little
<ce>             information of use, but it would be worthwhile
<ce>              to see whether the letter arrived at Castle
<ce>              Daggerfall at all. How you decide to do this
<ce>             is entirely your decision. I will contact you
<ce>                 if any new information should surface.
<ce><br>
<ce>             I am leaving Daggerfall soon. My position has
<ce>              here has been compromised and my life is in
<ce>              danger. Do not mention my name in court. It
<ce>              is more likely to hurt than help. Good luck,
<ce>                       and watch your back, %pcf.<p>
<p>Message:  1020
Dear %pcn,</p>
<pre><code> I heard about your accident at sea, and feared the
</code></pre>
<p>worst. Now that I've heard you're alive and well, I
would like the opportunity to meet with you and discuss
our beloved Emperor's mission in the Iliac Bay.</p>
<pre><code> Allow me to introduce myself. I am Lady Magnessen,
</code></pre>
<p>the Emperor's agent in the court of Daggerfall. My
position is not so official as an ambassador. None but
other agents of the Emperor know of my true affiliation.
The Iliac Bay is rife with rebels against the Imperial
throne, so your discretion is required.</p>
<pre><code> For the purpose of our meeting, I will take a room
</code></pre>
<p>at an inn, _dirtypit_ in __dirtypit_
of Daggerfall, for a month. After that, I will no longer
be available. I will expect you as soon as possible.</p>
<p><ce>                            Yours sincerely,<p>
<p><ce>                       Brisienna, Lady Magnessen<p>
<p>Message:  1021
%pcn,</p>
<pre><code> I sent you a letter weeks ago. I only hope
</code></pre>
<p>it caught up with you. If this one crosses your path
after you have visited me on your way to see me in
__dirtypit_ please do not take offense.
As I mentioned in the previous letter, I am the
Emperor's agent in Daggerfall and it is imperative
that I speak with you. I have extend my stay at
_dirtypit_ in __dirtypit_ for two more weeks.</p>
<p>Of course there is the possibility that you have
intentionally snubbed me and shirked your duty to
the Emperor. I hope that is not the case. If you
fail to arrive, I will be forced to assume you are
a traitor to his Imperial Majesty, Uriel Septim VII.</p>
<p><ce>                            Yours sincerely,<p>
<p><ce>                       Brisienna, Lady Magnessen<p>
<p>Message:  1022
%pcn,</p>
<p>I waited and you never arrived. I shall report
this to the Emperor. If I have my way, you will
be barred from service.</p>
<p><ce>                             Lady Magnessen<p>
<p>Message:  1026
<ce>             You approached by a young page who smiles in
<ce>             recognition and does not ask your name before
<ce>               he hands you a letter addressed to you. To
<ce>               all of your questions, he merely responds
<ce>                     with a blank look and a smile.
&lt;---&gt;
<ce>             A letter is pressed into your hand. You spin
<ce>             to see who gave it to you. You catch a glimpse
<ce>                of livery that vanishes into the crowd.
&lt;---&gt;
<ce>              A page steps forward saying &quot;Letter for you
<ce>                      %pcn,&quot; and hands you a note.
&lt;---&gt;
<ce>              A courier steps up to you with a letter in
<ce>                hand. &quot;I was told to give this letter to
<ce>                someone fitting your description,&quot; says
<ce>                the courier. As you take it, the courier
<ce>                     turns and walks quickly away.
&lt;---&gt;
<ce>                Reaching into you pack for something to
<ce>              eat, you spy a note. It wasn't there before.
&lt;---&gt;
<ce>             A redfaced courier startles you with a cry of
<ce>                   &quot;Letter for %pcn! Hey that must be
<ce>                 you. Here, take this. Gotta go. Other
<ce>                         deliveries to be made.<p>
<p>Message:  1025
<ce>             You wake and look around the room. Some hours
<ce>            ago, you were in a boat, en route to Daggerfall,
<ce>              when a storm of supernatural strength boiled
<ce>            over the Iliac Bay like a malefic creature. Your
<ce>              boat was destroyed, but you managed to swim
<ce>            through the churning water to a promontory rock.
<ce>           There you found a cave and escaped the fury of the
<ce>            storm. You had only just lit a small fire when a
<ce>             mudslide sealed you within. Your fear of being
<ce>             buried alive calmed when you saw the corridor
<ce>           leading out of the cavern. Perhaps there is a way
<ce>           out of this cave after all. Once free of the cave,
<ce>                   you can begin the Emperor's quest.<p>
<h2 id="---symbols-used-in-the-qrc-file">-- Symbols used in the QRC file:</h2>
<p>--              %pcf occurs 3 times.
--              %pcn occurs 5 times.
--              %qdt occurs 2 times.
--       __dirtypit_ occurs 11 times.</p>
<p>QBN:
Item _letter1_ letter used 1020
Item _letter2_ letter used 1021
Item stopMainQuest letter used 1022</p>
<p>Person ladyBrisienna named Lady_Brisienna anyInfo 1012 rumors 1013</p>
<p>Place PiratesHold permanent PirateerHold1
Place _dirtypit_ remote tavern</p>
<p>Clock _S.00_ 7.0:0 14.0:0
Clock _S.01_ 30.0:0 flag 0:1 range 0 1
Clock _S.02_ 14.0:0 flag 0:1 range 0 1
Clock _oneday_ 1.0:0 flag 0:1 range 0 1
Clock _S.07_ 29.9:0 flag 0:1 range 0 1</p>
<p>--	Quest start-up:
say 1025
log 1010 step 0
pc at PiratesHold do _S.05_</p>
<p>_S.00_ task:
place npc ladyBrisienna at _dirtypit_
create npc at _dirtypit_
give pc _letter1_ notify 1026
start timer _S.01_</p>
<p>_S.01_ task:
give pc _letter2_ notify 1026
start timer _S.02_</p>
<p>_S.02_ task:
give pc stopMainQuest notify 1026
change repute with ladyBrisienna by -15
start timer _S.07_</p>
<p>_S.03_ task:
clicked npc ladyBrisienna
say 1015
say 1016
log 1011 step 1
change global state _S.06_
stop timer _S.00_
stop timer _S.01_
stop timer _S.02_
start timer _oneday_</p>
<p>_oneday_ task:
end quest</p>
<p>until _S.05_ performed:
start timer _S.00_
start quest 977 977
start quest 999 999
change quest status 0</p>
<p>MetLadyBrisienna _S.06_
_S.07_ task:
end quest</p>
<hr>
<h3 id="nocturnals-quest">Nocturnal's Quest</h3>
<p>The original quest for the Skeleton's Key offered by the daedra Nocturnal has a potentially nasty bug in it.</p>
<p>In the original version, the PC could accept a bribe to betray Nocturnal, who punished the PC by destroying the bribe when she discovered the treachery. Unfortunately the quest scripting was leaky and handling of this betrayal was wonky. The PC was flogged by Qrc messages about bribes he knew nothing about, and so forth. If the PC already possessed the Warlock's Ring artifact, the quest could potentially destroy it.</p>
<p>What follows here is a replacement for Nocturnal's quest that handles the bribery without misleading messages, and as a bonus, sets up the quest so that the PC can accept the bribe and redeem his standing with Nocturnal, thus garnering two artifacts in one quest. (I don't like punative dead-ends unless the game has a functioning mindreader for my characters)</p>
<h2 id="----nocturnals-quest-for-the-skeleton-key-artifact">--  Nocturnal's quest for the Skeleton Key artifact.</h2>
<h2 id="----synopsis--------noturnal-will-bestow-the-skeleton-key-on-the-questee-for-assassinating--------her-mortal-enemy-_monster_-in-_mondung_--_monster_-in-turn-will-offer--------either-auriels-bow-or-the-warlocks-ring-to-the-questee-to-betray--------nocturnal-and-spare-_monster_s-life--if-the-questee-betrays-nocturnal--------hell-be-plagued-by-a-couple-of-frost-daedra-and-nocturnal-will-destroy--------whichever-alternate-artifact-the-questee-pursues">--  Synopsis:
--      Noturnal will bestow the Skeleton Key on the questee for assassinating
--      her mortal enemy _monster_ in _mondung_.  _monster_ in turn will offer
--      either Auriel's Bow or the Warlock's Ring to the questee to betray
--      Nocturnal and spare _monster_'s life.  If the questee betrays Nocturnal
--      he'll be plagued by a couple of frost daedra and Nocturnal will destroy
--      whichever alternate artifact the questee pursues.</h2>
<h2 id="--------if-the-questee-honors-nocturnals-request-he-must-find-nocturnals--------aide-_qgfriend_-to-obtain-the-skeleton-key-after-the-assassination">--      If the questee honors Nocturnal's request he must find Nocturnal's
--      aide _qgfriend_ to obtain the Skeleton Key after the assassination.</h2>
<h2 id="--------the-original-quest-from-bethesda-offered-the-warlocks-ring-as-a-bribe--------if-the-questee-already-had-possession-of-auriels-bow-but-failed-to--------account-for-the-fact-that-the-questee-might-indeed-have-both-bribes--------already--the-present-version-now-handles-that-better-and-offers-the--------questee-the-staff-of-magnus-if-he-already-has-both-the-bow-and-ring">--      The original quest from Bethesda offered the Warlock's Ring as a bribe
--      if the questee already had possession of Auriel's Bow, but failed to
--      account for the fact that the questee might indeed have both bribes
--      already.  The present version now handles that better and offers the
--      questee the Staff of Magnus if he already has both the bow and ring.</h2>
<h2 id="--------the-questee-may-outwit-the-_monster_-and-garner-both-artifacts-the-key--------and-whatever-bribe-was-offered-but-only-if-his-gossip-repute-is-high--------enough--unfortunately-the-rumor-mill-apparatus-seems-not-to-be--------working-so-for-the-nonce-use-letters-for-breadcrumbs">--      The questee may outwit the _monster_ and garner both artifacts, the Key
--      and whatever bribe was offered, but only if his gossip repute is high
--      enough.  Unfortunately, the rumor mill apparatus seems not to be
--      working, so for the nonce use letters for breadcrumbs.</h2>
<p>QuestDir: q/
Quest: 40c00y00
allowdupes: 1
messages: 51
Qrc:</p>
<p>QuestorOffer:  [1000]
<ce>                      You wish, %pcn, for power.
<ce>                 With it you can thrash at shadows and
<ce>                   have a hope. If I brought you this
<ce>                  hope, what would you bring me? Would
<ce>                  you destroy one who brings me pain?<p>
<p>RefuseQuest:  [1001]
<ce>                As I thought, no heart at all. We shall
<ce>                 have no contract then, you and I, and,
<ce>                   disappointed, return I to my cold
<ce>                 palace. The souls within are no kinder
<ce>                than those here, but there, they follow.<p>
<p>AcceptQuest:  [1002]
<ce>                Would you? You would be my anesthesia?
<ce>                You will go to the lair of the _monster_
<ce>                 =monster_ at ___mondung_ and slay %g2?
<ce>                    Ah, %pcf, for that I would give
<ce>                      to you my _artifact_ which I
<ce>                 have entrusted to my slave _qgfriend_.
<ce>                       After =monster_ lies dead,
<ce>                     go to ___qgfriend_ and meet my
<ce>                     slave at __qgfriend_. You will
<ce>                  recognize %g2 easily - a =qgfriend_.
<ce>                 There you will receive the _artifact_.
<ce>                   And now, I must return to my cold
<ce>                 palace of Oblivion. I will await news.<p>
<p>QuestFail:  [1003]
<ce>                      No. You must be looking for
<ce>                        a different =qgfriend_.
<ce>                       My name isn't _qgfriend_.<p>
<p>QuestComplete:  [1004]
<ce>                           So, you're %pcn,
<ce>                         right? I'm _qgfriend_.
<ce>                I must say, I was wondering what kind of
<ce>                %ra it took to glide into a _monster_'s
<ce>                 stronghold, murder the owner, and trip
<ce>                     right on out. Very impressive.
<ce>                   Nocturnal is likewise intrigued by
<ce>                   you, hence this gift: _artifact_.
<ce>                       Be careful with it, %pcf.<p>
<p>RumorsDuringQuest:  [1005]
=monster_ is a sneaky one -- %g brings the whole Mages Guild under suspicion.
&lt;---&gt;
I can't trust anyone at the Mages Guild, knowing =monster_ is a member.
&lt;---&gt;
Mages say =monster_ is hiding from Oblivion's wrath at ___fakedung_.
&lt;---&gt;
Mage's are gathering to scour ___fakedung_ for that scoundrel =monster_.
&lt;---&gt;
I saw a bunch of mages heading out to ___fakedung_.
&lt;---&gt;
I heard that traitor =monster_ is now hiding out in ___fakedung_.</p>
<p>RumorsPostfailure:  [1006]
I knew =monster_ was in some kind of trouble, why else would %g leave so quickly?
&lt;---&gt;
The Mages Guild must have decided =monster_ was a liability to their image.</p>
<p>RumorsPostsuccess:  [1007]
Well, I can't say I'm surprised about =monster_; %g3 past caught up to %g2.
&lt;---&gt;
I don't even think the Archmagister is sad to hear of the death of =monster_.</p>
<p>QuestorPostsuccess:  [1008]
Error: Quest 40c00y00.q tried to display text</p>
<p>QuestorPostsuccess:  [1008]
<ce><p>
<p>QuestorPostfailure:  [1009]
Error: Quest 40c00y00.q tried to display text</p>
<p>QuestorPostfailure:  [1009]
<ce><p>
<p>Message:  1011
_qgfriend_ is one of the regulars at __qgfriend_, just %di of here.
&lt;---&gt;
_qgfriend_ is a =qgfriend_ who haunts __qgfriend_. That's to the %di.</p>
<p>Message:  1012
_qgfriend_ is an agent of Nocturnal, operating out of __qgfriend_ %di of here.
&lt;---&gt;
_qgfriend_ is one of the slaves of Nocturnal, Daedra Lady of the Night.</p>
<p>Message:  1013
Nocturnal is the mysterious Lady of the Night, one of the Daedric Regents.
&lt;---&gt;
Nocturnal is a Regent of Oblivion, whose sphere is darkness and mystery.</p>
<p>Message:  1014
The _artifact_ can open any lock.</p>
<p>Message: 1015
Mages say =monster_ is hiding from Oblivion's wrath at ___fakedung_.
&lt;---&gt;
Mage's are gathering to scour ___fakedung_ for that scoundrel =monster_.
&lt;---&gt;
I saw a bunch of mages heading out to ___fakedung_.
&lt;---&gt;
I heard that traitor =monster_ is now hiding out in ___fakedung_.</p>
<p>Message: 1016
<ce> %oth!  =monster_,
<ce> Oblivion's agent is upon us!
<ce> I've moved the most valuable reagents to
<ce> to ___fakedung_ and
<ce> plan to meet you there after you've
<ce> dealt with that pesky %ra.
<ce><br>
<ce> N.<p>
<p>Message: 1017
<ce> A voice seems to echo
<ce> in your ear: =monster_
<ce> ...sure...special place...
<ce> news...<p>
<p>Message: 1018
%qdt:
When I arrived at ___mondung_
an echo mentioned a 'special
place' inside.</p>
<p>Message: 1019
%qdt:
I found a note from =monster_ saying that %g is expected
at ___fakedung_ after trying to bribe me.</p>
<p>Message:  1020
%qdt:
I now have a contract with Nocturnal,
one of the Daedric Princes of Oblivion. I have agreed
to slay the _monster_ =monster_ in %g3 stronghold of
___mondung_ in exchange for Nocturnal's
artifact, the _artifact_. I must have the deed
done and meet her agent _qgfriend_
in __qgfriend_ of ___qgfriend_
in =1stparton_ days or I will have failed the contract.
This may mean something worse than just me not getting
the _artifact_.</p>
<p>Message:  1021
%qdt:
=monster_ offered me _bow_ in exchange
for %g3 life, and I could not resist.
%g said that it is somewhere in
___bowdung_.  Since I have already
betrayed Nocturnal, I may as well
try to find it.</p>
<p>Message:  1022
%qdt:
=monster_ offered me the _ring_ in exchange
for %g3 life, and I could not resist.
%g said that it is somewhere in
___ringdung_.  Since I have already
betrayed Nocturnal, I may as well
try to find it.</p>
<p>Message:  1023
%qdt:
=monster_ offered me the _staff_ in exchange
for %g3 life, and I could not resist.
%g said that it is somewhere in
_staffdung_.  Since I have already
betrayed Nocturnal, I may as well
try to find it.</p>
<p>Message:  1030
<ce>                   Wait!  I know that Nocturnal has
<ce>                  sent you, and that she has promised
<ce>                   you the _artifact_.  But if it is
<ce>                  truly power you seek, I can top her
<ce>                   offer -- if you cease your attack,
<ce>                  I will tell you where to find _bow_.
<ce>                       Do you agree to my offer?<p>
<p>Message:  1031
<ce>                   Wait!  I know that Nocturnal has
<ce>                  sent you, and that she has promised
<ce>                   you the _artifact_.  But if it is
<ce>                  truly power you seek, I can top her
<ce>                   offer -- if you cease your attack,
<ce>               I will tell you where to find the _ring_.
<ce>                       Do you agree to my offer?<p>
<p>Message:  1032
<ce>                   Wait!  I know that Nocturnal has
<ce>                  sent you, and that she has promised
<ce>                   you the _artifact_.  But if it is
<ce>                  truly power you seek, I can top her
<ce>                   offer -- if you cease your attack,
<ce>               I will tell you where to find the _staff_.
<ce>                       Do you agree to my offer?<p>
<p>Message:  1035
<ce>                       You have slain =monster_.
<ce>                       Prince Nocturnal will now
<ce>                              rest easier.<p>
<p>Message:  1040
<ce>                      Excellent.  I knew you had
<ce>                      a mercenary's heart.  _bow_
<ce>                      lies hidden in ___bowdung_.
<ce>                      You have only to find it and
<ce>                       you will be a power to be
<ce>                      reckoned with indeed.  Now,
<ce>                      I bid you good day, lest you
<ce>                       decide to claim both _bow_
<ce>                         and the _artifact_ by
<ce>                     killing me.  A mercenary heart
<ce>                      such as yours should not be
<ce>                            trusted too far!<p>
<p>Message:  1041
<ce>                      Excellent.  I knew you had
<ce>                    a mercenary's heart.  The _ring_
<ce>                      lies hidden in ___ringdung_.
<ce>                      You have only to find it and
<ce>                       you will be a power to be
<ce>                      reckoned with indeed.  Now,
<ce>                      I bid you good day, lest you
<ce>                    decide to claim both the _ring_
<ce>                         and the _artifact_ by
<ce>                     killing me.  A mercenary heart
<ce>                      such as yours should not be
<ce>                            trusted too far!<p>
<p>Message:  1042
<ce>                      Excellent.  I knew you had
<ce>                    a mercenary's heart.  The _staff_
<ce>                      lies hidden in _staffdung_.
<ce>                      You have only to find it and
<ce>                       you will be a power to be
<ce>                      reckoned with indeed.  Now,
<ce>                      I bid you good day, lest you
<ce>                    decide to claim both the _staff_
<ce>                         and the _artifact_ by
<ce>                     killing me.  A mercenary heart
<ce>                      such as yours should not be
<ce>                            trusted too far!<p>
<p>QuestTimeLapse:  [1045]
<ce>                 Mocking laughter echoes in your mind,
<ce><br>
<ce>                   &quot;You should have known better than
<ce>                    to trust me, %pcn.  Perhaps this
<ce>                    shadow of power can satisfy your
<ce>                     craving for a time, while you
<ce>                     rage vainly against those who
<ce>                 actually possess it.  Me for example.
<ce>                   I do hope sweet Nocturnal won't be
<ce>                  too displeased with your treachery.&quot;
<ce><br>
<ce>                  _bow_ crumbles to dust in your hand.<p>
<p>Message:  1046
<ce>                 Mocking laughter echoes in your mind,
<ce><br>
<ce>                   &quot;You should have known better than
<ce>                    to trust me, %pcn.  Perhaps this
<ce>                    shadow of power can satisfy your
<ce>                     craving for a time, while you
<ce>                     rage vainly against those who
<ce>                 actually possess it.  Me for example.
<ce>                   I do hope sweet Nocturnal won't be
<ce>                  too displeased with your treachery.&quot;
<ce><br>
<ce>               The _ring_ crumbles to dust in your hand.<p>
<p>Message:  1047
<ce>                 Mocking laughter echoes in your mind,
<ce><br>
<ce>                   &quot;You should have known better than
<ce>                    to trust me, %pcn.  Perhaps this
<ce>                    shadow of power can satisfy your
<ce>                     craving for a time, while you
<ce>                     rage vainly against those who
<ce>                 actually possess it.  Me for example.
<ce>                   I do hope sweet Nocturnal won't be
<ce>                  too displeased with your treachery.&quot;
<ce><br>
<ce>               The _staff_ crumbles to dust in your hand.<p>
<p>Message:  1050
<ce>                 Nocturnal was most impressed at your
<ce>                     daring, %pcn.  She asked me to
<ce>                    kill you quickly as a reward for
<ce>                       such audacious treachery.<p>
<p>Qbn:</p>
<p>Item _artifact_ artifact Skeletons_Key used 1014
Item _bow_      artifact Auriels_Bow
Item _ring_     artifact Warlocks_Ring
Item _staff_    artifact Staff_of_Magnus
Item _letter_ letter used 1016</p>
<p>Questor _questgiver_ pic 0x70 anyInfo 1013
Person _qgfriend_ group Knightly_Order anyInfo 1011 rumors 1012</p>
<p>Place _mondung_ remote dungeon
Place _bowdung_ remote dungeon
Place _ringdung_ remote dungeon
Place _staffdung_ remote dungeon
Place _fakedung_ remote dungeon</p>
<p>Clock _1stparton_
Clock delay 1:0
Clock plague 1.0:0 2.18:40 flag 1
Clock betrayQuestor 0:2 0:30</p>
<p>Foe _monster_ is mage
Foe _daedra_ is Frost_daedra</p>
<p>--  Quest startup:
start timer _1stparton_
log 1020 step 0
reveal _mondung_
place _monster_ at _mondung_
have _bow_ set priorBow
have _ring_ set priorRing
_letter_ used do readLetter</p>
<p>--  Give him a hint on his first visit to the _monster_'s dungeon.
--  Once he's been bribed or killed it, be silent.</p>
<p>atDung when pc at _mondung_</p>
<p>giveHint task:
when atDung and not mondead and not bribe
say 1017
log 1018 step 1</p>
<p>--  Once the PC reads the clue about the alternate hide-out, mark it on
--  the overhead map.</p>
<p>readLetter task:
reveal _fakedung_
log 1019 step 1</p>
<p>_1stparton_ task:
end quest</p>
<p>npcclicked task:
clicked _qgfriend_</p>
<p>mondead task:
killed _monster_
say 1035</p>
<p>pcgetsgold task:
when npcclicked and mondead</p>
<p>--  The difference between 'unset' and 'clear' is that 'clear' would allow
--  repeated clicks of the npc (and thus repeated artifact gifts).  Unset
--  acts as a perpetual clear so that future clicks are ignored, effectly
--  dropping the npcclicked task on the floor.</p>
<pre><code>unset npcclicked
give pc \_artifact\_
start timer delay
</code></pre>
<p>injury task:
injured _monster_
place _letter_ at _mondung_</p>
<p>variable priorBow
variable priorRing
betrayQuestor task</p>
<p>--  Case selection for the various artifact bribes once the PC acquires one.
--  Take care to quash the marker that used to check for prior possession
--  of the artifact, since acquiring the artifact will perforce make it
--  true now, which is not what it is suppose to indicate.  (Note there is
--  no path to this task if the PC possesses the artifact prior to starting
--  this quest, at least assuming this is the only quest that bestows the
--  the Staff of Magnus, which is probably false, but what the original
--  quest author assumed)</p>
<p>findBow task:
clicked _bow_
clear priorBow</p>
<p>findRing task:
clicked _ring_
clear priorRing</p>
<p>findStaff task:
clicked _staff_</p>
<p>--  Case selection for accepting one of the artifact bribes from _monster_.</p>
<p>betrayBow task:
when bribe and bribeBow
say 1040
log 1021 step 2
reveal _bowdung_
place _bow_ at _bowdung_</p>
<p>betrayRing task:
when bribe and bribeRing
say 1041
log 1022 step 2
reveal _ringdung_
place _ring_ at _ringdung_</p>
<p>betrayStaff task:
when bribe and bribeStaff
say 1042
log 1023 step 2
reveal _staffdung_
place _staff_ at _staffdung_</p>
<p>--  Once the PC injures the _monster_, offer the PC a bribe of another
--  artifact to desist.  In its haste to get away from the PC, _monster_
--  drops a scrap of paper that the PC may read.</p>
<p>bribe task:
repute _questgiver_ is -20
start timer plague
place _monster_ at _fakedung_
place _letter_ at _mondung_
--  This command doesn't appear to have any effect here.
rumor mill 1015
add dialog for location _fakedung_</p>
<p>noBribe task:</p>
<p>--  Case selection to offer an alternative artifact as a bribe to make the
--  PC desist.  If the PC doesn't already have Auriel's Bow, offer it.
--  Else offer the Warlock's Ring if the PC already has the bow.  And
--  offer the Staff of Magnus if the PC already has both the bow and ring.
--  Unless the user has installed the CompUSA quest pack, we're guaranteed
--  that the PC doesn't already have the Staff.</p>
<p>bribeBow task:
when injury and not priorBow
prompt 1030 yes bribe no noBribe</p>
<p>bribeRing task:
when injury and priorBow and not priorRing
prompt 1031 yes bribe no noBribe</p>
<p>bribeStaff task:
when injury and priorRing and priorBow
prompt 1032 yes bribe no noBribe</p>
<p>--  Nocturnal understandably gets a bit anxious if the PC accepts the
--  bribe, even if he ultimately kills _monster_.  The frost daedra
--  won't pose a big threat except to very junior PCs, and even so,
--  the generator often fails to spawn any of them  (I wonder why.  I've
--  encountered _daedra_ only once during testing.  And then only because
--  I deliberately slept in an inn as soon as the plague task had
--  triggered)</p>
<p>plague task:
create foe _daedra_ every 3 minutes 4 times with 100% success</p>
<p>boast task:
injured _daedra_
say 1050</p>
<p>--  But, if the PC takes possession of the bribe before dispatching _monster_
--  Nocturnal will acknowledge the deception by destroying the artifact bribe.
--  If the PC does dispatch _monster_ before the timers run out, he can
--  recover the destroyed artifact from the _fakedung_.</p>
<p>byeBow task:
when betrayQuestor and not priorBow
place _bow_ at _fakedung_
say 1045</p>
<p>byeRing task:
when betrayQuestor and priorBow and not priorRing
place _ring_ at _fakedung_
say 1046</p>
<p>byeStaff task:
when betrayQuestor and priorBow and priorRing
place _staff_ at _fakedung_
say 1047</p>
<p>--  Case selection to detect (for Nocturnal) that the PC has apparently
--  honored the _nonster_'s bribe.</p>
<p>betrayedForBow task:
when findBow and not mondead
start timer betrayQuestor</p>
<p>betrayedForRing task:
when findRing and not mondead
start timer betrayQuestor</p>
<p>betrayedForStaff task:
when findStaff and not mondead
start timer betrayQuestor</p>
<p>--  On the other hand, if the PC has first dispatched _monster_ for Nocturnal,
--  allow the PC to garner the artifact bribe before collecting the Key
--  from Nocturnal's slavey.</p>
<p>saveBow task:
when findBow and mondead
make _bow_ permanent</p>
<p>saveRing task:
when findRing and mondead
make _ring_ permanent</p>
<p>saveStaff task:
when findStaff and mondead
make _staff_ permanent</p>
<p>--  Once the Key is collected, allow the PC to bask in the post-quest
--  rumors of success for a bit before finally ending the quest.</p>
<p>delay task:
end quest</p>
</ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></ce></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TheLacus/daggerfall-unity-docs/blob/master/modding/QuestSamples.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
